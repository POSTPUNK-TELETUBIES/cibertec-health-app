"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[803],{6985:function(e,t,n){n.d(t,{X:function(){return r}});function r(e){return"string"==typeof e}},2202:function(e,t,n){n.d(t,{Z:function(){return h}});var r=n(4646);n(4209);var i=n(885),s=n(2872);function o(e){let{styles:t,defaultTheme:n={}}=e,r="function"==typeof t?e=>t(null==e||0===Object.keys(e).length?n:e):t;return(0,s.jsx)(i.xB,{styles:r})}var a=n(6500),l=function(e){let{styles:t,themeId:n,defaultTheme:r={}}=e,i=(0,a.Z)(r),l="function"==typeof t?t(n&&i[n]||i):t;return(0,s.jsx)(o,{styles:l})},c=n(8543),u=n(5489),h=function(e){return(0,s.jsx)(l,(0,r.Z)({},e,{defaultTheme:c.Z,themeId:u.Z}))}},4637:function(e,t,n){let r=n(4209).createContext({});t.Z=r},4421:function(e,t,n){n.d(t,{Z:function(){return e3}});var r=n(4646),i=n(1126),s=n(4209);n(8031);var o=n(7072),a=n(1997),l=n(3264),c=n(6985);function u(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(void 0===e)return{};let n={};return Object.keys(e).filter(n=>n.match(/^on[A-Z]/)&&"function"==typeof e[n]&&!t.includes(n)).forEach(t=>{n[t]=e[t]}),n}function h(e){if(void 0===e)return{};let t={};return Object.keys(e).filter(t=>!(t.match(/^on[A-Z]/)&&"function"==typeof e[t])).forEach(n=>{t[n]=e[n]}),t}let d=["elementType","externalSlotProps","ownerState","skipResolvingSlotProps"];function f(e){var t,n;let{elementType:s,externalSlotProps:a,ownerState:f,skipResolvingSlotProps:p=!1}=e,v=(0,i.Z)(e,d),g=p?{}:"function"==typeof a?a(f,void 0):a,{props:m,internalRef:y}=function(e){let{getSlotProps:t,additionalProps:n,externalSlotProps:i,externalForwardedProps:s,className:a}=e;if(!t){let e=(0,o.Z)(null==n?void 0:n.className,a,null==s?void 0:s.className,null==i?void 0:i.className),t=(0,r.Z)({},null==n?void 0:n.style,null==s?void 0:s.style,null==i?void 0:i.style),l=(0,r.Z)({},n,s,i);return e.length>0&&(l.className=e),Object.keys(t).length>0&&(l.style=t),{props:l,internalRef:void 0}}let l=u((0,r.Z)({},s,i)),c=h(i),d=h(s),f=t(l),p=(0,o.Z)(null==f?void 0:f.className,null==n?void 0:n.className,a,null==s?void 0:s.className,null==i?void 0:i.className),v=(0,r.Z)({},null==f?void 0:f.style,null==n?void 0:n.style,null==s?void 0:s.style,null==i?void 0:i.style),g=(0,r.Z)({},f,n,d,c);return p.length>0&&(g.className=p),Object.keys(v).length>0&&(g.style=v),{props:g,internalRef:f.ref}}((0,r.Z)({},v,{externalSlotProps:g})),b=(0,l.Z)(y,null==g?void 0:g.ref,null==(t=e.additionalProps)?void 0:t.ref);return n=(0,r.Z)({},m,{ref:b}),void 0===s||(0,c.X)(s)?n:(0,r.Z)({},n,{ownerState:(0,r.Z)({},n.ownerState,f)})}var p=n(3600),v=n(8104),g=n(2662),m=n(4637),y=n(5717),b=n(7945);function w(e){return(0,b.ZP)("MuiList",e)}(0,y.Z)("MuiList",["root","padding","dense","subheader"]);var _=n(2872);let k=["children","className","component","dense","disablePadding","subheader"],E=e=>{let{classes:t,disablePadding:n,dense:r,subheader:i}=e;return(0,a.Z)({root:["root",!n&&"padding",r&&"dense",i&&"subheader"]},w,t)},S=(0,v.ZP)("ul",{name:"MuiList",slot:"Root",overridesResolver:(e,t)=>{let{ownerState:n}=e;return[t.root,!n.disablePadding&&t.padding,n.dense&&t.dense,n.subheader&&t.subheader]}})(e=>{let{ownerState:t}=e;return(0,r.Z)({listStyle:"none",margin:0,padding:0,position:"relative"},!t.disablePadding&&{paddingTop:8,paddingBottom:8},t.subheader&&{paddingTop:0})}),T=s.forwardRef(function(e,t){let n=(0,g.Z)({props:e,name:"MuiList"}),{children:a,className:l,component:c="ul",dense:u=!1,disablePadding:h=!1,subheader:d}=n,f=(0,i.Z)(n,k),p=s.useMemo(()=>({dense:u}),[u]),v=(0,r.Z)({},n,{component:c,dense:u,disablePadding:h}),y=E(v);return(0,_.jsx)(m.Z.Provider,{value:p,children:(0,_.jsxs)(S,(0,r.Z)({as:c,className:(0,o.Z)(y.root,l),ref:t,ownerState:v},f,{children:[d,a]}))})});function x(e){let t=e.documentElement.clientWidth;return Math.abs(window.innerWidth-t)}var P=n(9344),O=n(1954);let j=["actions","autoFocus","autoFocusItem","children","className","disabledItemsFocusable","disableListWrap","onKeyDown","variant"];function R(e,t,n){return e===t?e.firstChild:t&&t.nextElementSibling?t.nextElementSibling:n?null:e.firstChild}function C(e,t,n){return e===t?n?e.firstChild:e.lastChild:t&&t.previousElementSibling?t.previousElementSibling:n?null:e.lastChild}function A(e,t){if(void 0===t)return!0;let n=e.innerText;return void 0===n&&(n=e.textContent),0!==(n=n.trim().toLowerCase()).length&&(t.repeating?n[0]===t.keys[0]:0===n.indexOf(t.keys.join("")))}function I(e,t,n,r,i,s){let o=!1,a=i(e,t,!!t&&n);for(;a;){if(a===e.firstChild){if(o)return!1;o=!0}let t=!r&&(a.disabled||"true"===a.getAttribute("aria-disabled"));if(a.hasAttribute("tabindex")&&A(a,s)&&!t)return a.focus(),!0;a=i(e,a,n)}return!1}let L=s.forwardRef(function(e,t){let{actions:n,autoFocus:o=!1,autoFocusItem:a=!1,children:l,className:c,disabledItemsFocusable:u=!1,disableListWrap:h=!1,onKeyDown:d,variant:f="selectedMenu"}=e,v=(0,i.Z)(e,j),g=s.useRef(null),m=s.useRef({keys:[],repeating:!0,previousKeyMatched:!0,lastTime:null});(0,O.Z)(()=>{o&&g.current.focus()},[o]),s.useImperativeHandle(n,()=>({adjustStyleForScrollbar:(e,t)=>{let n=!g.current.style.width;if(e.clientHeight<g.current.clientHeight&&n){let n="".concat(x((0,p.Z)(e)),"px");g.current.style["rtl"===t.direction?"paddingLeft":"paddingRight"]=n,g.current.style.width="calc(100% + ".concat(n,")")}return g.current}}),[]);let y=(0,P.Z)(g,t),b=-1;s.Children.forEach(l,(e,t)=>{if(!s.isValidElement(e)){b===t&&(b+=1)>=l.length&&(b=-1);return}e.props.disabled||("selectedMenu"===f&&e.props.selected?b=t:-1!==b||(b=t)),b===t&&(e.props.disabled||e.props.muiSkipListHighlight||e.type.muiSkipListHighlight)&&(b+=1)>=l.length&&(b=-1)});let w=s.Children.map(l,(e,t)=>{if(t===b){let t={};return a&&(t.autoFocus=!0),void 0===e.props.tabIndex&&"selectedMenu"===f&&(t.tabIndex=0),s.cloneElement(e,t)}return e});return(0,_.jsx)(T,(0,r.Z)({role:"menu",ref:y,className:c,onKeyDown:e=>{let t=g.current,n=e.key,r=(0,p.Z)(t).activeElement;if("ArrowDown"===n)e.preventDefault(),I(t,r,h,u,R);else if("ArrowUp"===n)e.preventDefault(),I(t,r,h,u,C);else if("Home"===n)e.preventDefault(),I(t,null,h,u,R);else if("End"===n)e.preventDefault(),I(t,null,h,u,C);else if(1===n.length){let i=m.current,s=n.toLowerCase(),o=performance.now();i.keys.length>0&&(o-i.lastTime>500?(i.keys=[],i.repeating=!0,i.previousKeyMatched=!0):i.repeating&&s!==i.keys[0]&&(i.repeating=!1)),i.lastTime=o,i.keys.push(s);let a=r&&!i.repeating&&A(r,i);i.previousKeyMatched&&(a||I(t,r,!1,u,R,i))?e.preventDefault():i.previousKeyMatched=!1}d&&d(e)},tabIndex:o?0:-1},v,{children:w}))});var N=n(4453).Z,D=n(2517),Z=D.Z,U=n(7006),M=n(1739),F=n(303),z={disabled:!1},K=n(3192),q="unmounted",B="exited",H="entering",J="entered",G="exiting",W=function(e){function t(t,n){r=e.call(this,t,n)||this;var r,i,s=n&&!n.isMounting?t.enter:t.appear;return r.appearStatus=null,t.in?s?(i=B,r.appearStatus=H):i=J:i=t.unmountOnExit||t.mountOnEnter?q:B,r.state={status:i},r.nextCallback=null,r}(0,M.Z)(t,e),t.getDerivedStateFromProps=function(e,t){return e.in&&t.status===q?{status:B}:null};var n=t.prototype;return n.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},n.componentDidUpdate=function(e){var t=null;if(e!==this.props){var n=this.state.status;this.props.in?n!==H&&n!==J&&(t=H):(n===H||n===J)&&(t=G)}this.updateStatus(!1,t)},n.componentWillUnmount=function(){this.cancelNextCallback()},n.getTimeouts=function(){var e,t,n,r=this.props.timeout;return e=t=n=r,null!=r&&"number"!=typeof r&&(e=r.exit,t=r.enter,n=void 0!==r.appear?r.appear:t),{exit:e,enter:t,appear:n}},n.updateStatus=function(e,t){if(void 0===e&&(e=!1),null!==t){if(this.cancelNextCallback(),t===H){if(this.props.unmountOnExit||this.props.mountOnEnter){var n=this.props.nodeRef?this.props.nodeRef.current:F.findDOMNode(this);n&&n.scrollTop}this.performEnter(e)}else this.performExit()}else this.props.unmountOnExit&&this.state.status===B&&this.setState({status:q})},n.performEnter=function(e){var t=this,n=this.props.enter,r=this.context?this.context.isMounting:e,i=this.props.nodeRef?[r]:[F.findDOMNode(this),r],s=i[0],o=i[1],a=this.getTimeouts(),l=r?a.appear:a.enter;if(!e&&!n||z.disabled){this.safeSetState({status:J},function(){t.props.onEntered(s)});return}this.props.onEnter(s,o),this.safeSetState({status:H},function(){t.props.onEntering(s,o),t.onTransitionEnd(l,function(){t.safeSetState({status:J},function(){t.props.onEntered(s,o)})})})},n.performExit=function(){var e=this,t=this.props.exit,n=this.getTimeouts(),r=this.props.nodeRef?void 0:F.findDOMNode(this);if(!t||z.disabled){this.safeSetState({status:B},function(){e.props.onExited(r)});return}this.props.onExit(r),this.safeSetState({status:G},function(){e.props.onExiting(r),e.onTransitionEnd(n.exit,function(){e.safeSetState({status:B},function(){e.props.onExited(r)})})})},n.cancelNextCallback=function(){null!==this.nextCallback&&(this.nextCallback.cancel(),this.nextCallback=null)},n.safeSetState=function(e,t){t=this.setNextCallback(t),this.setState(e,t)},n.setNextCallback=function(e){var t=this,n=!0;return this.nextCallback=function(r){n&&(n=!1,t.nextCallback=null,e(r))},this.nextCallback.cancel=function(){n=!1},this.nextCallback},n.onTransitionEnd=function(e,t){this.setNextCallback(t);var n=this.props.nodeRef?this.props.nodeRef.current:F.findDOMNode(this),r=null==e&&!this.props.addEndListener;if(!n||r){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var i=this.props.nodeRef?[this.nextCallback]:[n,this.nextCallback],s=i[0],o=i[1];this.props.addEndListener(s,o)}null!=e&&setTimeout(this.nextCallback,e)},n.render=function(){var e=this.state.status;if(e===q)return null;var t=this.props,n=t.children,r=(t.in,t.mountOnEnter,t.unmountOnExit,t.appear,t.enter,t.exit,t.timeout,t.addEndListener,t.onEnter,t.onEntering,t.onEntered,t.onExit,t.onExiting,t.onExited,t.nodeRef,(0,i.Z)(t,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]));return s.createElement(K.Z.Provider,{value:null},"function"==typeof n?n(e,r):s.cloneElement(s.Children.only(n),r))},t}(s.Component);function V(){}W.contextType=K.Z,W.propTypes={},W.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:V,onEntering:V,onEntered:V,onExit:V,onExiting:V,onExited:V},W.UNMOUNTED=q,W.EXITED=B,W.ENTERING=H,W.ENTERED=J,W.EXITING=G;var X=n(6500),Y=n(8543),$=n(5489);function Q(){let e=(0,X.Z)(Y.Z);return e[$.Z]||e}let ee=e=>e.scrollTop;function et(e,t){var n,r;let{timeout:i,easing:s,style:o={}}=e;return{duration:null!=(n=o.transitionDuration)?n:"number"==typeof i?i:i[t.mode]||0,easing:null!=(r=o.transitionTimingFunction)?r:"object"==typeof s?s[t.mode]:s,delay:o.transitionDelay}}let en=["addEndListener","appear","children","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"];function er(e){return"scale(".concat(e,", ").concat(e**2,")")}let ei={entering:{opacity:1,transform:er(1)},entered:{opacity:1,transform:"none"}},es="undefined"!=typeof navigator&&/^((?!chrome|android).)*(safari|mobile)/i.test(navigator.userAgent)&&/(os |version\/)15(.|_)4/i.test(navigator.userAgent),eo=s.forwardRef(function(e,t){let{addEndListener:n,appear:o=!0,children:a,easing:l,in:c,onEnter:u,onEntered:h,onEntering:d,onExit:f,onExited:p,onExiting:v,style:g,timeout:m="auto",TransitionComponent:y=W}=e,b=(0,i.Z)(e,en),w=(0,U.Z)(),k=s.useRef(),E=Q(),S=s.useRef(null),T=(0,P.Z)(S,a.ref,t),x=e=>t=>{if(e){let n=S.current;void 0===t?e(n):e(n,t)}},O=x(d),j=x((e,t)=>{let n;ee(e);let{duration:r,delay:i,easing:s}=et({style:g,timeout:m,easing:l},{mode:"enter"});"auto"===m?(n=E.transitions.getAutoHeightDuration(e.clientHeight),k.current=n):n=r,e.style.transition=[E.transitions.create("opacity",{duration:n,delay:i}),E.transitions.create("transform",{duration:es?n:.666*n,delay:i,easing:s})].join(","),u&&u(e,t)}),R=x(h),C=x(v),A=x(e=>{let t;let{duration:n,delay:r,easing:i}=et({style:g,timeout:m,easing:l},{mode:"exit"});"auto"===m?(t=E.transitions.getAutoHeightDuration(e.clientHeight),k.current=t):t=n,e.style.transition=[E.transitions.create("opacity",{duration:t,delay:r}),E.transitions.create("transform",{duration:es?t:.666*t,delay:es?r:r||.333*t,easing:i})].join(","),e.style.opacity=0,e.style.transform=er(.75),f&&f(e)}),I=x(p);return(0,_.jsx)(y,(0,r.Z)({appear:o,in:c,nodeRef:S,onEnter:j,onEntered:R,onEntering:O,onExit:A,onExited:I,onExiting:C,addEndListener:e=>{"auto"===m&&w.start(k.current||0,e),n&&n(S.current,e)},timeout:"auto"===m?null:m},b,{children:(e,t)=>s.cloneElement(a,(0,r.Z)({style:(0,r.Z)({opacity:0,transform:er(.75),visibility:"exited"!==e||c?void 0:"hidden"},ei[e],g,a.props.style),ref:T},t))}))});eo.muiSupportAuto=!0;var ea=n(5602),el=n(8054);function ec(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce((e,t)=>null==t?e:function(){for(var n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];e.apply(this,r),t.apply(this,r)},()=>{})}function eu(e,t){t?e.setAttribute("aria-hidden","true"):e.removeAttribute("aria-hidden")}function eh(e){return parseInt((0,D.Z)(e).getComputedStyle(e).paddingRight,10)||0}function ed(e,t,n,r,i){let s=[t,n,...r];[].forEach.call(e.children,e=>{let t=-1===s.indexOf(e),n=!function(e){let t=-1!==["TEMPLATE","SCRIPT","STYLE","LINK","MAP","META","NOSCRIPT","PICTURE","COL","COLGROUP","PARAM","SLOT","SOURCE","TRACK"].indexOf(e.tagName),n="INPUT"===e.tagName&&"hidden"===e.getAttribute("type");return t||n}(e);t&&n&&eu(e,i)})}function ef(e,t){let n=-1;return e.some((e,r)=>!!t(e)&&(n=r,!0)),n}class ep{add(e,t){let n=this.modals.indexOf(e);if(-1!==n)return n;n=this.modals.length,this.modals.push(e),e.modalRef&&eu(e.modalRef,!1);let r=function(e){let t=[];return[].forEach.call(e.children,e=>{"true"===e.getAttribute("aria-hidden")&&t.push(e)}),t}(t);ed(t,e.mount,e.modalRef,r,!0);let i=ef(this.containers,e=>e.container===t);return -1!==i?this.containers[i].modals.push(e):this.containers.push({modals:[e],container:t,restore:null,hiddenSiblings:r}),n}mount(e,t){let n=ef(this.containers,t=>-1!==t.modals.indexOf(e)),r=this.containers[n];r.restore||(r.restore=function(e,t){let n=[],r=e.container;if(!t.disableScrollLock){let e;if(function(e){let t=(0,ea.Z)(e);return t.body===e?(0,D.Z)(e).innerWidth>t.documentElement.clientWidth:e.scrollHeight>e.clientHeight}(r)){let e=x((0,ea.Z)(r));n.push({value:r.style.paddingRight,property:"padding-right",el:r}),r.style.paddingRight="".concat(eh(r)+e,"px");let t=(0,ea.Z)(r).querySelectorAll(".mui-fixed");[].forEach.call(t,t=>{n.push({value:t.style.paddingRight,property:"padding-right",el:t}),t.style.paddingRight="".concat(eh(t)+e,"px")})}if(r.parentNode instanceof DocumentFragment)e=(0,ea.Z)(r).body;else{let t=r.parentElement,n=(0,D.Z)(r);e=(null==t?void 0:t.nodeName)==="HTML"&&"scroll"===n.getComputedStyle(t).overflowY?t:r}n.push({value:e.style.overflow,property:"overflow",el:e},{value:e.style.overflowX,property:"overflow-x",el:e},{value:e.style.overflowY,property:"overflow-y",el:e}),e.style.overflow="hidden"}return()=>{n.forEach(e=>{let{value:t,el:n,property:r}=e;t?n.style.setProperty(r,t):n.style.removeProperty(r)})}}(r,t))}remove(e){let t=!(arguments.length>1)||void 0===arguments[1]||arguments[1],n=this.modals.indexOf(e);if(-1===n)return n;let r=ef(this.containers,t=>-1!==t.modals.indexOf(e)),i=this.containers[r];if(i.modals.splice(i.modals.indexOf(e),1),this.modals.splice(n,1),0===i.modals.length)i.restore&&i.restore(),e.modalRef&&eu(e.modalRef,t),ed(i.container,e.mount,e.modalRef,i.hiddenSiblings,!1),this.containers.splice(r,1);else{let e=i.modals[i.modals.length-1];e.modalRef&&eu(e.modalRef,!1)}return n}isTopModal(e){return this.modals.length>0&&this.modals[this.modals.length-1]===e}constructor(){this.containers=void 0,this.modals=void 0,this.modals=[],this.containers=[]}}let ev=new ep;function eg(e){let t=[],n=[];return Array.from(e.querySelectorAll('input,select,textarea,a[href],button,[tabindex],audio[controls],video[controls],[contenteditable]:not([contenteditable="false"])')).forEach((e,r)=>{let i=function(e){let t=parseInt(e.getAttribute("tabindex")||"",10);return Number.isNaN(t)?"true"===e.contentEditable||("AUDIO"===e.nodeName||"VIDEO"===e.nodeName||"DETAILS"===e.nodeName)&&null===e.getAttribute("tabindex")?0:e.tabIndex:t}(e);-1===i||e.disabled||"INPUT"===e.tagName&&"hidden"===e.type||function(e){if("INPUT"!==e.tagName||"radio"!==e.type||!e.name)return!1;let t=t=>e.ownerDocument.querySelector('input[type="radio"]'.concat(t)),n=t('[name="'.concat(e.name,'"]:checked'));return n||(n=t('[name="'.concat(e.name,'"]'))),n!==e}(e)||(0===i?t.push(e):n.push({documentOrder:r,tabIndex:i,node:e}))}),n.sort((e,t)=>e.tabIndex===t.tabIndex?e.documentOrder-t.documentOrder:e.tabIndex-t.tabIndex).map(e=>e.node).concat(t)}function em(){return!0}function ey(e){let{children:t,disableAutoFocus:n=!1,disableEnforceFocus:r=!1,disableRestoreFocus:i=!1,getTabbable:o=eg,isEnabled:a=em,open:c}=e,u=s.useRef(!1),h=s.useRef(null),d=s.useRef(null),f=s.useRef(null),p=s.useRef(null),v=s.useRef(!1),g=s.useRef(null),m=(0,l.Z)(t.ref,g),y=s.useRef(null);s.useEffect(()=>{c&&g.current&&(v.current=!n)},[n,c]),s.useEffect(()=>{if(!c||!g.current)return;let e=(0,ea.Z)(g.current);return!g.current.contains(e.activeElement)&&(g.current.hasAttribute("tabIndex")||g.current.setAttribute("tabIndex","-1"),v.current&&g.current.focus()),()=>{i||(f.current&&f.current.focus&&(u.current=!0,f.current.focus()),f.current=null)}},[c]),s.useEffect(()=>{if(!c||!g.current)return;let e=(0,ea.Z)(g.current),t=t=>{y.current=t,!r&&a()&&"Tab"===t.key&&e.activeElement===g.current&&t.shiftKey&&(u.current=!0,d.current&&d.current.focus())},n=()=>{let t=g.current;if(null===t)return;if(!e.hasFocus()||!a()||u.current){u.current=!1;return}if(t.contains(e.activeElement)||r&&e.activeElement!==h.current&&e.activeElement!==d.current)return;if(e.activeElement!==p.current)p.current=null;else if(null!==p.current)return;if(!v.current)return;let n=[];if((e.activeElement===h.current||e.activeElement===d.current)&&(n=o(g.current)),n.length>0){var i,s;let e=!!((null==(i=y.current)?void 0:i.shiftKey)&&(null==(s=y.current)?void 0:s.key)==="Tab"),t=n[0],r=n[n.length-1];"string"!=typeof t&&"string"!=typeof r&&(e?r.focus():t.focus())}else t.focus()};e.addEventListener("focusin",n),e.addEventListener("keydown",t,!0);let i=setInterval(()=>{e.activeElement&&"BODY"===e.activeElement.tagName&&n()},50);return()=>{clearInterval(i),e.removeEventListener("focusin",n),e.removeEventListener("keydown",t,!0)}},[n,r,i,a,c,o]);let b=e=>{null===f.current&&(f.current=e.relatedTarget),v.current=!0};return(0,_.jsxs)(s.Fragment,{children:[(0,_.jsx)("div",{tabIndex:c?0:-1,onFocus:b,ref:h,"data-testid":"sentinelStart"}),s.cloneElement(t,{ref:m,onFocus:e=>{null===f.current&&(f.current=e.relatedTarget),v.current=!0,p.current=e.target;let n=t.props.onFocus;n&&n(e)}}),(0,_.jsx)("div",{tabIndex:c?0:-1,onFocus:b,ref:d,"data-testid":"sentinelEnd"})]})}var eb=n(7543),ew=n(3094);let e_=s.forwardRef(function(e,t){let{children:n,container:r,disablePortal:i=!1}=e,[o,a]=s.useState(null),c=(0,l.Z)(s.isValidElement(n)?n.ref:null,t);return((0,eb.Z)(()=>{!i&&a(("function"==typeof r?r():r)||document.body)},[r,i]),(0,eb.Z)(()=>{if(o&&!i)return(0,ew.Z)(t,o),()=>{(0,ew.Z)(t,null)}},[t,o,i]),i)?s.isValidElement(n)?s.cloneElement(n,{ref:c}):(0,_.jsx)(s.Fragment,{children:n}):(0,_.jsx)(s.Fragment,{children:o?F.createPortal(n,o):o})}),ek=["addEndListener","appear","children","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"],eE={entering:{opacity:1},entered:{opacity:1}},eS=s.forwardRef(function(e,t){let n=Q(),o={enter:n.transitions.duration.enteringScreen,exit:n.transitions.duration.leavingScreen},{addEndListener:a,appear:l=!0,children:c,easing:u,in:h,onEnter:d,onEntered:f,onEntering:p,onExit:v,onExited:g,onExiting:m,style:y,timeout:b=o,TransitionComponent:w=W}=e,k=(0,i.Z)(e,ek),E=s.useRef(null),S=(0,P.Z)(E,c.ref,t),T=e=>t=>{if(e){let n=E.current;void 0===t?e(n):e(n,t)}},x=T(p),O=T((e,t)=>{ee(e);let r=et({style:y,timeout:b,easing:u},{mode:"enter"});e.style.webkitTransition=n.transitions.create("opacity",r),e.style.transition=n.transitions.create("opacity",r),d&&d(e,t)}),j=T(f),R=T(m),C=T(e=>{let t=et({style:y,timeout:b,easing:u},{mode:"exit"});e.style.webkitTransition=n.transitions.create("opacity",t),e.style.transition=n.transitions.create("opacity",t),v&&v(e)}),A=T(g);return(0,_.jsx)(w,(0,r.Z)({appear:l,in:h,nodeRef:E,onEnter:O,onEntered:j,onEntering:x,onExit:C,onExited:A,onExiting:R,addEndListener:e=>{a&&a(E.current,e)},timeout:b},k,{children:(e,t)=>s.cloneElement(c,(0,r.Z)({style:(0,r.Z)({opacity:0,visibility:"exited"!==e||h?void 0:"hidden"},eE[e],y,c.props.style),ref:S},t))}))});function eT(e){return(0,b.ZP)("MuiBackdrop",e)}(0,y.Z)("MuiBackdrop",["root","invisible"]);let ex=["children","className","component","components","componentsProps","invisible","open","slotProps","slots","TransitionComponent","transitionDuration"],eP=e=>{let{classes:t,invisible:n}=e;return(0,a.Z)({root:["root",n&&"invisible"]},eT,t)},eO=(0,v.ZP)("div",{name:"MuiBackdrop",slot:"Root",overridesResolver:(e,t)=>{let{ownerState:n}=e;return[t.root,n.invisible&&t.invisible]}})(e=>{let{ownerState:t}=e;return(0,r.Z)({position:"fixed",display:"flex",alignItems:"center",justifyContent:"center",right:0,bottom:0,top:0,left:0,backgroundColor:"rgba(0, 0, 0, 0.5)",WebkitTapHighlightColor:"transparent"},t.invisible&&{backgroundColor:"transparent"})}),ej=s.forwardRef(function(e,t){var n,s,a;let l=(0,g.Z)({props:e,name:"MuiBackdrop"}),{children:c,className:u,component:h="div",components:d={},componentsProps:f={},invisible:p=!1,open:v,slotProps:m={},slots:y={},TransitionComponent:b=eS,transitionDuration:w}=l,k=(0,i.Z)(l,ex),E=(0,r.Z)({},l,{component:h,invisible:p}),S=eP(E),T=null!=(n=m.root)?n:f.root;return(0,_.jsx)(b,(0,r.Z)({in:v,timeout:w},k,{children:(0,_.jsx)(eO,(0,r.Z)({"aria-hidden":!0},T,{as:null!=(s=null!=(a=y.root)?a:d.Root)?s:h,className:(0,o.Z)(S.root,u,null==T?void 0:T.className),ownerState:(0,r.Z)({},E,null==T?void 0:T.ownerState),classes:S,ref:t,children:c}))}))});function eR(e){return(0,b.ZP)("MuiModal",e)}(0,y.Z)("MuiModal",["root","hidden","backdrop"]);let eC=["BackdropComponent","BackdropProps","classes","className","closeAfterTransition","children","container","component","components","componentsProps","disableAutoFocus","disableEnforceFocus","disableEscapeKeyDown","disablePortal","disableRestoreFocus","disableScrollLock","hideBackdrop","keepMounted","onBackdropClick","onClose","onTransitionEnter","onTransitionExited","open","slotProps","slots","theme"],eA=e=>{let{open:t,exited:n,classes:r}=e;return(0,a.Z)({root:["root",!t&&n&&"hidden"],backdrop:["backdrop"]},eR,r)},eI=(0,v.ZP)("div",{name:"MuiModal",slot:"Root",overridesResolver:(e,t)=>{let{ownerState:n}=e;return[t.root,!n.open&&n.exited&&t.hidden]}})(e=>{let{theme:t,ownerState:n}=e;return(0,r.Z)({position:"fixed",zIndex:(t.vars||t).zIndex.modal,right:0,bottom:0,top:0,left:0},!n.open&&n.exited&&{visibility:"hidden"})}),eL=(0,v.ZP)(ej,{name:"MuiModal",slot:"Backdrop",overridesResolver:(e,t)=>t.backdrop})({zIndex:-1}),eN=s.forwardRef(function(e,t){var n,a,c,h,d,p;let v=(0,g.Z)({name:"MuiModal",props:e}),{BackdropComponent:m=eL,BackdropProps:y,className:b,closeAfterTransition:w=!1,children:k,container:E,component:S,components:T={},componentsProps:x={},disableAutoFocus:P=!1,disableEnforceFocus:O=!1,disableEscapeKeyDown:j=!1,disablePortal:R=!1,disableRestoreFocus:C=!1,disableScrollLock:A=!1,hideBackdrop:I=!1,keepMounted:L=!1,onBackdropClick:N,open:D,slotProps:Z,slots:U}=v,M=(0,i.Z)(v,eC),F=(0,r.Z)({},v,{closeAfterTransition:w,disableAutoFocus:P,disableEnforceFocus:O,disableEscapeKeyDown:j,disablePortal:R,disableRestoreFocus:C,disableScrollLock:A,hideBackdrop:I,keepMounted:L}),{getRootProps:z,getBackdropProps:K,getTransitionProps:q,portalRef:B,isTopModal:H,exited:J,hasTransition:G}=function(e){let{container:t,disableEscapeKeyDown:n=!1,disableScrollLock:i=!1,manager:o=ev,closeAfterTransition:a=!1,onTransitionEnter:c,onTransitionExited:h,children:d,onClose:f,open:p,rootRef:v}=e,g=s.useRef({}),m=s.useRef(null),y=s.useRef(null),b=(0,l.Z)(y,v),[w,_]=s.useState(!p),k=!!d&&d.props.hasOwnProperty("in"),E=!0;("false"===e["aria-hidden"]||!1===e["aria-hidden"])&&(E=!1);let S=()=>(0,ea.Z)(m.current),T=()=>(g.current.modalRef=y.current,g.current.mount=m.current,g.current),x=()=>{o.mount(T(),{disableScrollLock:i}),y.current&&(y.current.scrollTop=0)},P=(0,el.Z)(()=>{let e=("function"==typeof t?t():t)||S().body;o.add(T(),e),y.current&&x()}),O=s.useCallback(()=>o.isTopModal(T()),[o]),j=(0,el.Z)(e=>{m.current=e,e&&(p&&O()?x():y.current&&eu(y.current,E))}),R=s.useCallback(()=>{o.remove(T(),E)},[E,o]);s.useEffect(()=>()=>{R()},[R]),s.useEffect(()=>{p?P():k&&a||R()},[p,R,k,a,P]);let C=e=>t=>{var r;null==(r=e.onKeyDown)||r.call(e,t),"Escape"===t.key&&229!==t.which&&O()&&!n&&(t.stopPropagation(),f&&f(t,"escapeKeyDown"))},A=e=>t=>{var n;null==(n=e.onClick)||n.call(e,t),t.target===t.currentTarget&&f&&f(t,"backdropClick")};return{getRootProps:function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=u(e);delete n.onTransitionEnter,delete n.onTransitionExited;let i=(0,r.Z)({},n,t);return(0,r.Z)({role:"presentation"},i,{onKeyDown:C(i),ref:b})},getBackdropProps:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,r.Z)({"aria-hidden":!0},e,{onClick:A(e),open:p})},getTransitionProps:()=>({onEnter:ec(()=>{_(!1),c&&c()},null==d?void 0:d.props.onEnter),onExited:ec(()=>{_(!0),h&&h(),a&&R()},null==d?void 0:d.props.onExited)}),rootRef:b,portalRef:j,isTopModal:O,exited:w,hasTransition:k}}((0,r.Z)({},F,{rootRef:t})),W=(0,r.Z)({},F,{exited:J}),V=eA(W),X={};if(void 0===k.props.tabIndex&&(X.tabIndex="-1"),G){let{onEnter:e,onExited:t}=q();X.onEnter=e,X.onExited=t}let Y=null!=(n=null!=(a=null==U?void 0:U.root)?a:T.Root)?n:eI,$=null!=(c=null!=(h=null==U?void 0:U.backdrop)?h:T.Backdrop)?c:m,Q=null!=(d=null==Z?void 0:Z.root)?d:x.root,ee=null!=(p=null==Z?void 0:Z.backdrop)?p:x.backdrop,et=f({elementType:Y,externalSlotProps:Q,externalForwardedProps:M,getSlotProps:z,additionalProps:{ref:t,as:S},ownerState:W,className:(0,o.Z)(b,null==Q?void 0:Q.className,null==V?void 0:V.root,!W.open&&W.exited&&(null==V?void 0:V.hidden))}),en=f({elementType:$,externalSlotProps:ee,additionalProps:y,getSlotProps:e=>K((0,r.Z)({},e,{onClick:t=>{N&&N(t),null!=e&&e.onClick&&e.onClick(t)}})),className:(0,o.Z)(null==ee?void 0:ee.className,null==y?void 0:y.className,null==V?void 0:V.backdrop),ownerState:W});return L||D||G&&!J?(0,_.jsx)(e_,{ref:B,container:E,disablePortal:R,children:(0,_.jsxs)(Y,(0,r.Z)({},et,{children:[!I&&m?(0,_.jsx)($,(0,r.Z)({},en)):null,(0,_.jsx)(ey,{disableEnforceFocus:O,disableAutoFocus:P,disableRestoreFocus:C,isEnabled:H,open:D,children:s.cloneElement(k,X)})]}))}):null});var eD=n(363);function eZ(e){return(0,b.ZP)("MuiPopover",e)}(0,y.Z)("MuiPopover",["root","paper"]);let eU=["onEntering"],eM=["action","anchorEl","anchorOrigin","anchorPosition","anchorReference","children","className","container","elevation","marginThreshold","open","PaperProps","slots","slotProps","transformOrigin","TransitionComponent","transitionDuration","TransitionProps","disableScrollLock"],eF=["slotProps"];function ez(e,t){let n=0;return"number"==typeof t?n=t:"center"===t?n=e.height/2:"bottom"===t&&(n=e.height),n}function eK(e,t){let n=0;return"number"==typeof t?n=t:"center"===t?n=e.width/2:"right"===t&&(n=e.width),n}function eq(e){return[e.horizontal,e.vertical].map(e=>"number"==typeof e?"".concat(e,"px"):e).join(" ")}function eB(e){return"function"==typeof e?e():e}let eH=e=>{let{classes:t}=e;return(0,a.Z)({root:["root"],paper:["paper"]},eZ,t)},eJ=(0,v.ZP)(eN,{name:"MuiPopover",slot:"Root",overridesResolver:(e,t)=>t.root})({}),eG=(0,v.ZP)(eD.Z,{name:"MuiPopover",slot:"Paper",overridesResolver:(e,t)=>t.paper})({position:"absolute",overflowY:"auto",overflowX:"hidden",minWidth:16,minHeight:16,maxWidth:"calc(100% - 32px)",maxHeight:"calc(100% - 32px)",outline:0}),eW=s.forwardRef(function(e,t){var n,a,l;let u=(0,g.Z)({props:e,name:"MuiPopover"}),{action:h,anchorEl:d,anchorOrigin:v={vertical:"top",horizontal:"left"},anchorPosition:m,anchorReference:y="anchorEl",children:b,className:w,container:k,elevation:E=8,marginThreshold:S=16,open:T,PaperProps:x={},slots:O,slotProps:j,transformOrigin:R={vertical:"top",horizontal:"left"},TransitionComponent:C=eo,transitionDuration:A="auto",TransitionProps:{onEntering:I}={},disableScrollLock:L=!1}=u,D=(0,i.Z)(u.TransitionProps,eU),U=(0,i.Z)(u,eM),M=null!=(n=null==j?void 0:j.paper)?n:x,F=s.useRef(),z=(0,P.Z)(F,M.ref),K=(0,r.Z)({},u,{anchorOrigin:v,anchorReference:y,elevation:E,marginThreshold:S,externalPaperSlotProps:M,transformOrigin:R,TransitionComponent:C,transitionDuration:A,TransitionProps:D}),q=eH(K),B=s.useCallback(()=>{if("anchorPosition"===y)return m;let e=eB(d),t=(e&&1===e.nodeType?e:(0,p.Z)(F.current).body).getBoundingClientRect();return{top:t.top+ez(t,v.vertical),left:t.left+eK(t,v.horizontal)}},[d,v.horizontal,v.vertical,m,y]),H=s.useCallback(e=>({vertical:ez(e,R.vertical),horizontal:eK(e,R.horizontal)}),[R.horizontal,R.vertical]),J=s.useCallback(e=>{let t={width:e.offsetWidth,height:e.offsetHeight},n=H(t);if("none"===y)return{top:null,left:null,transformOrigin:eq(n)};let r=B(),i=r.top-n.vertical,s=r.left-n.horizontal,o=i+t.height,a=s+t.width,l=Z(eB(d)),c=l.innerHeight-S,u=l.innerWidth-S;if(null!==S&&i<S){let e=i-S;i-=e,n.vertical+=e}else if(null!==S&&o>c){let e=o-c;i-=e,n.vertical+=e}if(null!==S&&s<S){let e=s-S;s-=e,n.horizontal+=e}else if(a>u){let e=a-u;s-=e,n.horizontal+=e}return{top:"".concat(Math.round(i),"px"),left:"".concat(Math.round(s),"px"),transformOrigin:eq(n)}},[d,y,B,H,S]),[G,W]=s.useState(T),V=s.useCallback(()=>{let e=F.current;if(!e)return;let t=J(e);null!==t.top&&(e.style.top=t.top),null!==t.left&&(e.style.left=t.left),e.style.transformOrigin=t.transformOrigin,W(!0)},[J]);s.useEffect(()=>(L&&window.addEventListener("scroll",V),()=>window.removeEventListener("scroll",V)),[d,L,V]),s.useEffect(()=>{T&&V()}),s.useImperativeHandle(h,()=>T?{updatePosition:()=>{V()}}:null,[T,V]),s.useEffect(()=>{if(!T)return;let e=N(()=>{V()}),t=Z(d);return t.addEventListener("resize",e),()=>{e.clear(),t.removeEventListener("resize",e)}},[d,T,V]);let X=A;"auto"!==A||C.muiSupportAuto||(X=void 0);let Y=k||(d?(0,p.Z)(eB(d)).body:void 0),$=null!=(a=null==O?void 0:O.root)?a:eJ,Q=null!=(l=null==O?void 0:O.paper)?l:eG,ee=f({elementType:Q,externalSlotProps:(0,r.Z)({},M,{style:G?M.style:(0,r.Z)({},M.style,{opacity:0})}),additionalProps:{elevation:E,ref:z},ownerState:K,className:(0,o.Z)(q.paper,null==M?void 0:M.className)}),et=f({elementType:$,externalSlotProps:(null==j?void 0:j.root)||{},externalForwardedProps:U,additionalProps:{ref:t,slotProps:{backdrop:{invisible:!0}},container:Y,open:T},ownerState:K,className:(0,o.Z)(q.root,w)}),{slotProps:en}=et,er=(0,i.Z)(et,eF);return(0,_.jsx)($,(0,r.Z)({},er,!(0,c.X)($)&&{slotProps:en,disableScrollLock:L},{children:(0,_.jsx)(C,(0,r.Z)({appear:!0,in:T,onEntering:(e,t)=>{I&&I(e,t),V()},onExited:()=>{W(!1)},timeout:X},D,{children:(0,_.jsx)(Q,(0,r.Z)({},ee,{children:b}))}))}))});function eV(e){return(0,b.ZP)("MuiMenu",e)}(0,y.Z)("MuiMenu",["root","paper","list"]);let eX=["onEntering"],eY=["autoFocus","children","className","disableAutoFocusItem","MenuListProps","onClose","open","PaperProps","PopoverClasses","transitionDuration","TransitionProps","variant","slots","slotProps"],e$={vertical:"top",horizontal:"right"},eQ={vertical:"top",horizontal:"left"},e0=e=>{let{classes:t}=e;return(0,a.Z)({root:["root"],paper:["paper"],list:["list"]},eV,t)},e1=(0,v.ZP)(eW,{shouldForwardProp:e=>(0,v.FO)(e)||"classes"===e,name:"MuiMenu",slot:"Root",overridesResolver:(e,t)=>t.root})({}),e2=(0,v.ZP)(eG,{name:"MuiMenu",slot:"Paper",overridesResolver:(e,t)=>t.paper})({maxHeight:"calc(100% - 96px)",WebkitOverflowScrolling:"touch"}),e4=(0,v.ZP)(L,{name:"MuiMenu",slot:"List",overridesResolver:(e,t)=>t.list})({outline:0});var e3=s.forwardRef(function(e,t){var n,a;let l=(0,g.Z)({props:e,name:"MuiMenu"}),{autoFocus:c=!0,children:u,className:h,disableAutoFocusItem:d=!1,MenuListProps:p={},onClose:v,open:m,PaperProps:y={},PopoverClasses:b,transitionDuration:w="auto",TransitionProps:{onEntering:k}={},variant:E="selectedMenu",slots:S={},slotProps:T={}}=l,x=(0,i.Z)(l.TransitionProps,eX),P=(0,i.Z)(l,eY),O=Q(),j="rtl"===O.direction,R=(0,r.Z)({},l,{autoFocus:c,disableAutoFocusItem:d,MenuListProps:p,onEntering:k,PaperProps:y,transitionDuration:w,TransitionProps:x,variant:E}),C=e0(R),A=c&&!d&&m,I=s.useRef(null),L=-1;s.Children.map(u,(e,t)=>{s.isValidElement(e)&&(e.props.disabled||("selectedMenu"===E&&e.props.selected?L=t:-1!==L||(L=t)))});let N=null!=(n=S.paper)?n:e2,D=null!=(a=T.paper)?a:y,Z=f({elementType:S.root,externalSlotProps:T.root,ownerState:R,className:[C.root,h]}),U=f({elementType:N,externalSlotProps:D,ownerState:R,className:C.paper});return(0,_.jsx)(e1,(0,r.Z)({onClose:v,anchorOrigin:{vertical:"bottom",horizontal:j?"right":"left"},transformOrigin:j?e$:eQ,slots:{paper:N,root:S.root},slotProps:{root:Z,paper:U},open:m,ref:t,transitionDuration:w,TransitionProps:(0,r.Z)({onEntering:(e,t)=>{I.current&&I.current.adjustStyleForScrollbar(e,O),k&&k(e,t)}},x),ownerState:R},P,{classes:b,children:(0,_.jsx)(e4,(0,r.Z)({onKeyDown:e=>{"Tab"===e.key&&(e.preventDefault(),v&&v(e,"tabKeyDown"))},actions:I,autoFocus:c&&(-1===L||d),autoFocusItem:A,variant:E},p,{className:(0,o.Z)(C.list,p.className),children:u}))}))})},3600:function(e,t,n){var r=n(5602);t.Z=r.Z},1954:function(e,t,n){var r=n(7543);t.Z=r.Z},4453:function(e,t,n){n.d(t,{Z:function(){return r}});function r(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:166;function r(){for(var r=arguments.length,i=Array(r),s=0;s<r;s++)i[s]=arguments[s];clearTimeout(t),t=setTimeout(()=>{e.apply(this,i)},n)}return r.clear=()=>{clearTimeout(t)},r}},5602:function(e,t,n){n.d(t,{Z:function(){return r}});function r(e){return e&&e.ownerDocument||document}},2517:function(e,t,n){n.d(t,{Z:function(){return i}});var r=n(5602);function i(e){return(0,r.Z)(e).defaultView||window}},469:function(e,t,n){n.r(t),n.d(t,{Headers:function(){return s},Request:function(){return o},Response:function(){return a},fetch:function(){return i}});var r="undefined"!=typeof self?self:window;let i=r.fetch;t.default=r.fetch.bind(r);let s=r.Headers,o=r.Request,a=r.Response},4899:function(e,t,n){n.d(t,{eI:function(){return tE}});let r=e=>{let t;return t=e||("undefined"==typeof fetch?function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return Promise.resolve().then(n.bind(n,469)).then(e=>{let{default:n}=e;return n(...t)})}:fetch),function(){for(var e=arguments.length,n=Array(e),r=0;r<e;r++)n[r]=arguments[r];return t(...n)}};class i extends Error{constructor(e,t="FunctionsError",n){super(e),this.name=t,this.context=n}}class s extends i{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class o extends i{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class a extends i{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}class l{setAuth(e){this.headers.Authorization="Bearer ".concat(e)}invoke(e){var t,n,r,i,l;let c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return n=this,r=void 0,i=void 0,l=function*(){try{let n;let{headers:r,method:i,body:l}=c,u={};l&&(r&&!Object.prototype.hasOwnProperty.call(r,"Content-Type")||!r)&&("undefined"!=typeof Blob&&l instanceof Blob||l instanceof ArrayBuffer?(u["Content-Type"]="application/octet-stream",n=l):"string"==typeof l?(u["Content-Type"]="text/plain",n=l):"undefined"!=typeof FormData&&l instanceof FormData?n=l:(u["Content-Type"]="application/json",n=JSON.stringify(l)));let h=yield this.fetch("".concat(this.url,"/").concat(e),{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},u),this.headers),r),body:n}).catch(e=>{throw new s(e)}),d=h.headers.get("x-relay-error");if(d&&"true"===d)throw new o(h);if(!h.ok)throw new a(h);let f=(null!==(t=h.headers.get("Content-Type"))&&void 0!==t?t:"text/plain").split(";")[0].trim();return{data:"application/json"===f?yield h.json():"application/octet-stream"===f?yield h.blob():"multipart/form-data"===f?yield h.formData():yield h.text(),error:null}}catch(e){return{data:null,error:e}}},new(i||(i=Promise))(function(e,t){function s(e){try{a(l.next(e))}catch(e){t(e)}}function o(e){try{a(l.throw(e))}catch(e){t(e)}}function a(t){var n;t.done?e(t.value):((n=t.value)instanceof i?n:new i(function(e){e(n)})).then(s,o)}a((l=l.apply(n,r||[])).next())})}constructor(e,{headers:t={},customFetch:n}={}){this.url=e,this.headers=t,this.fetch=r(n)}}var c,u,h,d,f,p,v,g,m,y,b,w,_,k,E,S,T,x,P,O=n(469);class j extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}}class R{throwOnError(){return this.shouldThrowOnError=!0,this}then(e,t){void 0===this.schema||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),"GET"!==this.method&&"HEAD"!==this.method&&(this.headers["Content-Type"]="application/json");let n=(0,this.fetch)(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async e=>{var t,n,r;let i=null,s=null,o=null,a=e.status,l=e.statusText;if(e.ok){if("HEAD"!==this.method){let t=await e.text();""===t||(s="text/csv"===this.headers.Accept?t:this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?t:JSON.parse(t))}let r=null===(t=this.headers.Prefer)||void 0===t?void 0:t.match(/count=(exact|planned|estimated)/),c=null===(n=e.headers.get("content-range"))||void 0===n?void 0:n.split("/");r&&c&&c.length>1&&(o=parseInt(c[1])),this.isMaybeSingle&&"GET"===this.method&&Array.isArray(s)&&(s.length>1?(i={code:"PGRST116",details:"Results contain ".concat(s.length," rows, application/vnd.pgrst.object+json requires 1 row"),hint:null,message:"JSON object requested, multiple (or no) rows returned"},s=null,o=null,a=406,l="Not Acceptable"):s=1===s.length?s[0]:null)}else{let t=await e.text();try{i=JSON.parse(t),Array.isArray(i)&&404===e.status&&(s=[],i=null,a=200,l="OK")}catch(n){404===e.status&&""===t?(a=204,l="No Content"):i={message:t}}if(i&&this.isMaybeSingle&&(null===(r=null==i?void 0:i.details)||void 0===r?void 0:r.includes("0 rows"))&&(i=null,a=200,l="OK"),i&&this.shouldThrowOnError)throw new j(i)}return{error:i,data:s,count:o,status:a,statusText:l}});return this.shouldThrowOnError||(n=n.catch(e=>{var t,n,r;return{error:{message:"".concat(null!==(t=null==e?void 0:e.name)&&void 0!==t?t:"FetchError",": ").concat(null==e?void 0:e.message),details:"".concat(null!==(n=null==e?void 0:e.stack)&&void 0!==n?n:""),hint:"",code:"".concat(null!==(r=null==e?void 0:e.code)&&void 0!==r?r:"")},data:null,count:null,status:0,statusText:""}})),n.then(e,t)}constructor(e){this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=e.headers,this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=e.shouldThrowOnError,this.signal=e.signal,this.isMaybeSingle=e.isMaybeSingle,e.fetch?this.fetch=e.fetch:"undefined"==typeof fetch?this.fetch=O.default:this.fetch=fetch}}class C extends R{select(e){let t=!1,n=(null!=e?e:"*").split("").map(e=>/\s/.test(e)&&!t?"":('"'===e&&(t=!t),e)).join("");return this.url.searchParams.set("select",n),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(e){let{ascending:t=!0,nullsFirst:n,foreignTable:r,referencedTable:i=r}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=i?"".concat(i,".order"):"order",o=this.url.searchParams.get(s);return this.url.searchParams.set(s,"".concat(o?"".concat(o,","):"").concat(e,".").concat(t?"asc":"desc").concat(void 0===n?"":n?".nullsfirst":".nullslast")),this}limit(e){let{foreignTable:t,referencedTable:n=t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.url.searchParams.set(void 0===n?"limit":"".concat(n,".limit"),"".concat(e)),this}range(e,t){let{foreignTable:n,referencedTable:r=n}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=void 0===r?"offset":"".concat(r,".offset"),s=void 0===r?"limit":"".concat(r,".limit");return this.url.searchParams.set(i,"".concat(e)),this.url.searchParams.set(s,"".concat(t-e+1)),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return"GET"===this.method?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain(){var e;let{analyze:t=!1,verbose:n=!1,settings:r=!1,buffers:i=!1,wal:s=!1,format:o="text"}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=[t?"analyze":null,n?"verbose":null,r?"settings":null,i?"buffers":null,s?"wal":null].filter(Boolean).join("|"),l=null!==(e=this.headers.Accept)&&void 0!==e?e:"application/json";return this.headers.Accept="application/vnd.pgrst.plan+".concat(o,'; for="').concat(l,'"; options=').concat(a,";"),this}rollback(){var e;return(null!==(e=this.headers.Prefer)&&void 0!==e?e:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}}class A extends C{eq(e,t){return this.url.searchParams.append(e,"eq.".concat(t)),this}neq(e,t){return this.url.searchParams.append(e,"neq.".concat(t)),this}gt(e,t){return this.url.searchParams.append(e,"gt.".concat(t)),this}gte(e,t){return this.url.searchParams.append(e,"gte.".concat(t)),this}lt(e,t){return this.url.searchParams.append(e,"lt.".concat(t)),this}lte(e,t){return this.url.searchParams.append(e,"lte.".concat(t)),this}like(e,t){return this.url.searchParams.append(e,"like.".concat(t)),this}likeAllOf(e,t){return this.url.searchParams.append(e,"like(all).{".concat(t.join(","),"}")),this}likeAnyOf(e,t){return this.url.searchParams.append(e,"like(any).{".concat(t.join(","),"}")),this}ilike(e,t){return this.url.searchParams.append(e,"ilike.".concat(t)),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,"ilike(all).{".concat(t.join(","),"}")),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,"ilike(any).{".concat(t.join(","),"}")),this}is(e,t){return this.url.searchParams.append(e,"is.".concat(t)),this}in(e,t){let n=t.map(e=>"string"==typeof e&&RegExp("[,()]").test(e)?'"'.concat(e,'"'):"".concat(e)).join(",");return this.url.searchParams.append(e,"in.(".concat(n,")")),this}contains(e,t){return"string"==typeof t?this.url.searchParams.append(e,"cs.".concat(t)):Array.isArray(t)?this.url.searchParams.append(e,"cs.{".concat(t.join(","),"}")):this.url.searchParams.append(e,"cs.".concat(JSON.stringify(t))),this}containedBy(e,t){return"string"==typeof t?this.url.searchParams.append(e,"cd.".concat(t)):Array.isArray(t)?this.url.searchParams.append(e,"cd.{".concat(t.join(","),"}")):this.url.searchParams.append(e,"cd.".concat(JSON.stringify(t))),this}rangeGt(e,t){return this.url.searchParams.append(e,"sr.".concat(t)),this}rangeGte(e,t){return this.url.searchParams.append(e,"nxl.".concat(t)),this}rangeLt(e,t){return this.url.searchParams.append(e,"sl.".concat(t)),this}rangeLte(e,t){return this.url.searchParams.append(e,"nxr.".concat(t)),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,"adj.".concat(t)),this}overlaps(e,t){return"string"==typeof t?this.url.searchParams.append(e,"ov.".concat(t)):this.url.searchParams.append(e,"ov.{".concat(t.join(","),"}")),this}textSearch(e,t){let{config:n,type:r}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i="";return"plain"===r?i="pl":"phrase"===r?i="ph":"websearch"===r&&(i="w"),this.url.searchParams.append(e,"".concat(i,"fts").concat(void 0===n?"":"(".concat(n,")"),".").concat(t)),this}match(e){return Object.entries(e).forEach(e=>{let[t,n]=e;this.url.searchParams.append(t,"eq.".concat(n))}),this}not(e,t,n){return this.url.searchParams.append(e,"not.".concat(t,".").concat(n)),this}or(e){let{foreignTable:t,referencedTable:n=t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.url.searchParams.append(n?"".concat(n,".or"):"or","(".concat(e,")")),this}filter(e,t,n){return this.url.searchParams.append(e,"".concat(t,".").concat(n)),this}}class I{select(e){let{head:t=!1,count:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=!1,i=(null!=e?e:"*").split("").map(e=>/\s/.test(e)&&!r?"":('"'===e&&(r=!r),e)).join("");return this.url.searchParams.set("select",i),n&&(this.headers.Prefer="count=".concat(n)),new A({method:t?"HEAD":"GET",url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(e){let{count:t,defaultToNull:n=!0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=[];if(this.headers.Prefer&&r.push(this.headers.Prefer),t&&r.push("count=".concat(t)),n||r.push("missing=default"),this.headers.Prefer=r.join(","),Array.isArray(e)){let t=e.reduce((e,t)=>e.concat(Object.keys(t)),[]);if(t.length>0){let e=[...new Set(t)].map(e=>'"'.concat(e,'"'));this.url.searchParams.set("columns",e.join(","))}}return new A({method:"POST",url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}upsert(e){let{onConflict:t,ignoreDuplicates:n=!1,count:r,defaultToNull:i=!0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=["resolution=".concat(n?"ignore":"merge","-duplicates")];if(void 0!==t&&this.url.searchParams.set("on_conflict",t),this.headers.Prefer&&s.push(this.headers.Prefer),r&&s.push("count=".concat(r)),i||s.push("missing=default"),this.headers.Prefer=s.join(","),Array.isArray(e)){let t=e.reduce((e,t)=>e.concat(Object.keys(t)),[]);if(t.length>0){let e=[...new Set(t)].map(e=>'"'.concat(e,'"'));this.url.searchParams.set("columns",e.join(","))}}return new A({method:"POST",url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}update(e){let{count:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=[];return this.headers.Prefer&&n.push(this.headers.Prefer),t&&n.push("count=".concat(t)),this.headers.Prefer=n.join(","),new A({method:"PATCH",url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}delete(){let{count:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=[];return e&&t.push("count=".concat(e)),this.headers.Prefer&&t.unshift(this.headers.Prefer),this.headers.Prefer=t.join(","),new A({method:"DELETE",url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}constructor(e,{headers:t={},schema:n,fetch:r}){this.url=e,this.headers=t,this.schema=n,this.fetch=r}}let L={"X-Client-Info":"postgrest-js/".concat("1.9.2")};class N{from(e){return new I(new URL("".concat(this.url,"/").concat(e)),{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new N(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e){let t,n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{head:i=!1,count:s}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=new URL("".concat(this.url,"/rpc/").concat(e));i?(t="HEAD",Object.entries(r).forEach(e=>{let[t,n]=e;o.searchParams.append(t,"".concat(n))})):(t="POST",n=r);let a=Object.assign({},this.headers);return s&&(a.Prefer="count=".concat(s)),new A({method:t,url:o,headers:a,schema:this.schemaName,body:n,fetch:this.fetch,allowEmpty:!1})}constructor(e,{headers:t={},schema:n,fetch:r}={}){this.url=e,this.headers=Object.assign(Object.assign({},L),t),this.schemaName=n,this.fetch=r}}let D={"X-Client-Info":"realtime-js/".concat("2.9.3")};(b=c||(c={}))[b.connecting=0]="connecting",b[b.open=1]="open",b[b.closing=2]="closing",b[b.closed=3]="closed",(w=u||(u={})).closed="closed",w.errored="errored",w.joined="joined",w.joining="joining",w.leaving="leaving",(_=h||(h={})).close="phx_close",_.error="phx_error",_.join="phx_join",_.reply="phx_reply",_.leave="phx_leave",_.access_token="access_token",(d||(d={})).websocket="websocket",(k=f||(f={})).Connecting="connecting",k.Open="open",k.Closing="closing",k.Closed="closed";class Z{reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}}class U{decode(e,t){return e.constructor===ArrayBuffer?t(this._binaryDecode(e)):"string"==typeof e?t(JSON.parse(e)):t({})}_binaryDecode(e){let t=new DataView(e),n=new TextDecoder;return this._decodeBroadcast(e,t,n)}_decodeBroadcast(e,t,n){let r=t.getUint8(1),i=t.getUint8(2),s=this.HEADER_LENGTH+2,o=n.decode(e.slice(s,s+r));s+=r;let a=n.decode(e.slice(s,s+i));return s+=i,{ref:null,topic:o,event:a,payload:JSON.parse(n.decode(e.slice(s,e.byteLength)))}}constructor(){this.HEADER_LENGTH=1}}class M{resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var n;return this._hasReceived(e)&&t(null===(n=this.receivedResp)||void 0===n?void 0:n.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){this.timeoutTimer||(this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref),this.channel._on(this.refEvent,{},e=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=e,this._matchReceive(e)}),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout))}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive(e){let{status:t,response:n}=e;this.recHooks.filter(e=>e.status===t).forEach(e=>e.callback(n))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}constructor(e,t,n={},r=1e4){this.channel=e,this.event=t,this.payload=n,this.timeout=r,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}}(E=p||(p={})).SYNC="sync",E.JOIN="join",E.LEAVE="leave";class F{static syncState(e,t,n,r){let i=this.cloneDeep(e),s=this.transformState(t),o={},a={};return this.map(i,(e,t)=>{s[e]||(a[e]=t)}),this.map(s,(e,t)=>{let n=i[e];if(n){let r=t.map(e=>e.presence_ref),i=n.map(e=>e.presence_ref),s=t.filter(e=>0>i.indexOf(e.presence_ref)),l=n.filter(e=>0>r.indexOf(e.presence_ref));s.length>0&&(o[e]=s),l.length>0&&(a[e]=l)}else o[e]=t}),this.syncDiff(i,{joins:o,leaves:a},n,r)}static syncDiff(e,t,n,r){let{joins:i,leaves:s}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return n||(n=()=>{}),r||(r=()=>{}),this.map(i,(t,r)=>{var i;let s=null!==(i=e[t])&&void 0!==i?i:[];if(e[t]=this.cloneDeep(r),s.length>0){let n=e[t].map(e=>e.presence_ref),r=s.filter(e=>0>n.indexOf(e.presence_ref));e[t].unshift(...r)}n(t,s,r)}),this.map(s,(t,n)=>{let i=e[t];if(!i)return;let s=n.map(e=>e.presence_ref);i=i.filter(e=>0>s.indexOf(e.presence_ref)),e[t]=i,r(t,i,n),0===i.length&&delete e[t]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(n=>t(n,e[n]))}static transformState(e){return Object.getOwnPropertyNames(e=this.cloneDeep(e)).reduce((t,n)=>{let r=e[n];return"metas"in r?t[n]=r.metas.map(e=>(e.presence_ref=e.phx_ref,delete e.phx_ref,delete e.phx_ref_prev,e)):t[n]=r,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};let n=(null==t?void 0:t.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},e=>{let{onJoin:t,onLeave:n,onSync:r}=this.caller;this.joinRef=this.channel._joinRef(),this.state=F.syncState(this.state,e,t,n),this.pendingDiffs.forEach(e=>{this.state=F.syncDiff(this.state,e,t,n)}),this.pendingDiffs=[],r()}),this.channel._on(n.diff,{},e=>{let{onJoin:t,onLeave:n,onSync:r}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(e):(this.state=F.syncDiff(this.state,e,t,n),r())}),this.onJoin((e,t,n)=>{this.channel._trigger("presence",{event:"join",key:e,currentPresences:t,newPresences:n})}),this.onLeave((e,t,n)=>{this.channel._trigger("presence",{event:"leave",key:e,currentPresences:t,leftPresences:n})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}}(S=v||(v={})).abstime="abstime",S.bool="bool",S.date="date",S.daterange="daterange",S.float4="float4",S.float8="float8",S.int2="int2",S.int4="int4",S.int4range="int4range",S.int8="int8",S.int8range="int8range",S.json="json",S.jsonb="jsonb",S.money="money",S.numeric="numeric",S.oid="oid",S.reltime="reltime",S.text="text",S.time="time",S.timestamp="timestamp",S.timestamptz="timestamptz",S.timetz="timetz",S.tsrange="tsrange",S.tstzrange="tstzrange";let z=function(e,t){var n;let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=null!==(n=r.skipTypes)&&void 0!==n?n:[];return Object.keys(t).reduce((n,r)=>(n[r]=K(r,e,t,i),n),{})},K=(e,t,n,r)=>{let i=t.find(t=>t.name===e),s=null==i?void 0:i.type,o=n[e];return s&&!r.includes(s)?q(s,o):B(o)},q=(e,t)=>{if("_"===e.charAt(0))return W(t,e.slice(1,e.length));switch(e){case v.bool:return H(t);case v.float4:case v.float8:case v.int2:case v.int4:case v.int8:case v.numeric:case v.oid:return J(t);case v.json:case v.jsonb:return G(t);case v.timestamp:return V(t);case v.abstime:case v.date:case v.daterange:case v.int4range:case v.int8range:case v.money:case v.reltime:case v.text:case v.time:case v.timestamptz:case v.timetz:case v.tsrange:case v.tstzrange:default:return B(t)}},B=e=>e,H=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},J=e=>{if("string"==typeof e){let t=parseFloat(e);if(!Number.isNaN(t))return t}return e},G=e=>{if("string"==typeof e)try{return JSON.parse(e)}catch(e){console.log("JSON parse error: ".concat(e))}return e},W=(e,t)=>{if("string"!=typeof e)return e;let n=e.length-1,r=e[n];if("{"===e[0]&&"}"===r){let r;let i=e.slice(1,n);try{r=JSON.parse("["+i+"]")}catch(e){r=i?i.split(","):[]}return r.map(e=>q(t,e))}return e},V=e=>"string"==typeof e?e.replace(" ","T"):e;(T=g||(g={})).ALL="*",T.INSERT="INSERT",T.UPDATE="UPDATE",T.DELETE="DELETE",(x=m||(m={})).BROADCAST="broadcast",x.PRESENCE="presence",x.POSTGRES_CHANGES="postgres_changes",(P=y||(y={})).SUBSCRIBED="SUBSCRIBED",P.TIMED_OUT="TIMED_OUT",P.CLOSED="CLOSED",P.CHANNEL_ERROR="CHANNEL_ERROR";class X{subscribe(e){var t,n;let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.timeout;if(this.socket.isConnected()||this.socket.connect(),this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{let{config:{broadcast:i,presence:s}}=this.params;this._onError(t=>e&&e("CHANNEL_ERROR",t)),this._onClose(()=>e&&e("CLOSED"));let o={},a={broadcast:i,presence:s,postgres_changes:null!==(n=null===(t=this.bindings.postgres_changes)||void 0===t?void 0:t.map(e=>e.filter))&&void 0!==n?n:[]};this.socket.accessToken&&(o.access_token=this.socket.accessToken),this.updateJoinPayload(Object.assign({config:a},o)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",t=>{var n;let{postgres_changes:r}=t;if(this.socket.accessToken&&this.socket.setAuth(this.socket.accessToken),void 0===r){e&&e("SUBSCRIBED");return}{let t=this.bindings.postgres_changes,i=null!==(n=null==t?void 0:t.length)&&void 0!==n?n:0,s=[];for(let n=0;n<i;n++){let i=t[n],{filter:{event:o,schema:a,table:l,filter:c}}=i,u=r&&r[n];if(u&&u.event===o&&u.schema===a&&u.table===l&&u.filter===c)s.push(Object.assign(Object.assign({},i),{id:u.id}));else{this.unsubscribe(),e&&e("CHANNEL_ERROR",Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=s,e&&e("SUBSCRIBED");return}}).receive("error",t=>{e&&e("CHANNEL_ERROR",Error(JSON.stringify(Object.values(t).join(", ")||"error")))}).receive("timeout",()=>{e&&e("TIMED_OUT")})}return this}presenceState(){return this.presence.state}async track(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return await this.send({type:"presence",event:"untrack"},e)}on(e,t,n){return this._on(e,t,n)}async send(e){var t,n;let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._canPush()||"broadcast"!==e.type)return new Promise(t=>{var n,i,s;let o=this._push(e.type,e,r.timeout||this.timeout);"broadcast"!==e.type||(null===(s=null===(i=null===(n=this.params)||void 0===n?void 0:n.config)||void 0===i?void 0:i.broadcast)||void 0===s?void 0:s.ack)||t("ok"),o.receive("ok",()=>t("ok")),o.receive("timeout",()=>t("timed out"))});{let{event:i,payload:s}=e,o={method:"POST",headers:{apikey:null!==(t=this.socket.apiKey)&&void 0!==t?t:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:s}]})};try{if((await this._fetchWithTimeout(this.broadcastEndpointURL,o,null!==(n=r.timeout)&&void 0!==n?n:this.timeout)).ok)return"ok";return"error"}catch(e){if("AbortError"===e.name)return"timed out";return"error"}}}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.timeout;this.state=u.leaving;let t=()=>{this.socket.log("channel","leave ".concat(this.topic)),this._trigger(h.close,"leave",this._joinRef())};return this.rejoinTimer.reset(),this.joinPush.destroy(),new Promise(n=>{let r=new M(this,h.leave,{},e);r.receive("ok",()=>{t(),n("ok")}).receive("timeout",()=>{t(),n("timed out")}).receive("error",()=>{n("error")}),r.send(),this._canPush()||r.trigger("ok",{})})}_broadcastEndpointURL(){let e=this.socket.endPoint;return(e=(e=e.replace(/^ws/i,"http")).replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,"")).replace(/\/+$/,"")+"/api/broadcast"}async _fetchWithTimeout(e,t,n){let r=new AbortController,i=setTimeout(()=>r.abort(),n),s=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:r.signal}));return clearTimeout(i),s}_push(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.timeout;if(!this.joinedOnce)throw"tried to push '".concat(e,"' to '").concat(this.topic,"' before joining. Use channel.subscribe() before pushing events");let r=new M(this,e,t,n);return this._canPush()?r.send():(r.startTimeout(),this.pushBuffer.push(r)),r}_onMessage(e,t,n){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,n){var r,i;let s=e.toLocaleLowerCase(),{close:o,error:a,leave:l,join:c}=h;if(n&&[o,a,l,c].indexOf(s)>=0&&n!==this._joinRef())return;let u=this._onMessage(s,t,n);if(t&&!u)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(s)?null===(r=this.bindings.postgres_changes)||void 0===r||r.filter(e=>{var t,n,r;return(null===(t=e.filter)||void 0===t?void 0:t.event)==="*"||(null===(r=null===(n=e.filter)||void 0===n?void 0:n.event)||void 0===r?void 0:r.toLocaleLowerCase())===s}).map(e=>e.callback(u,n)):null===(i=this.bindings[s])||void 0===i||i.filter(e=>{var n,r,i,o,a,l;if(!["broadcast","presence","postgres_changes"].includes(s))return e.type.toLocaleLowerCase()===s;if("id"in e){let s=e.id,o=null===(n=e.filter)||void 0===n?void 0:n.event;return s&&(null===(r=t.ids)||void 0===r?void 0:r.includes(s))&&("*"===o||(null==o?void 0:o.toLocaleLowerCase())===(null===(i=t.data)||void 0===i?void 0:i.type.toLocaleLowerCase()))}{let n=null===(a=null===(o=null==e?void 0:e.filter)||void 0===o?void 0:o.event)||void 0===a?void 0:a.toLocaleLowerCase();return"*"===n||n===(null===(l=null==t?void 0:t.event)||void 0===l?void 0:l.toLocaleLowerCase())}}).map(e=>{if("object"==typeof u&&"ids"in u){let e=u.data,{schema:t,table:n,commit_timestamp:r,type:i,errors:s}=e;u=Object.assign(Object.assign({},{schema:t,table:n,commit_timestamp:r,eventType:i,new:{},old:{},errors:s}),this._getPayloadRecords(e))}e.callback(u,n)})}_isClosed(){return this.state===u.closed}_isJoined(){return this.state===u.joined}_isJoining(){return this.state===u.joining}_isLeaving(){return this.state===u.leaving}_replyEventName(e){return"chan_reply_".concat(e)}_on(e,t,n){let r=e.toLocaleLowerCase(),i={type:r,filter:t,callback:n};return this.bindings[r]?this.bindings[r].push(i):this.bindings[r]=[i],this}_off(e,t){let n=e.toLocaleLowerCase();return this.bindings[n]=this.bindings[n].filter(e=>{var r;return!((null===(r=e.type)||void 0===r?void 0:r.toLocaleLowerCase())===n&&X.isEqual(e.filter,t))}),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(let n in e)if(e[n]!==t[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(h.close,{},e)}_onError(e){this._on(h.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.timeout;this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=u.joining,this.joinPush.resend(e))}_getPayloadRecords(e){let t={new:{},old:{}};return("INSERT"===e.type||"UPDATE"===e.type)&&(t.new=z(e.columns,e.record)),("UPDATE"===e.type||"DELETE"===e.type)&&(t.old=z(e.columns,e.old_record)),t}constructor(e,t={config:{}},n){this.topic=e,this.params=t,this.socket=n,this.bindings={},this.state=u.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""}},t.config),this.timeout=this.socket.timeout,this.joinPush=new M(this,h.join,this.params,this.timeout),this.rejoinTimer=new Z(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=u.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(e=>e.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel","close ".concat(this.topic," ").concat(this._joinRef())),this.state=u.closed,this.socket._remove(this)}),this._onError(e=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel","error ".concat(this.topic),e),this.state=u.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel","timeout ".concat(this.topic),this.joinPush.timeout),this.state=u.errored,this.rejoinTimer.scheduleTimeout())}),this._on(h.reply,{},(e,t)=>{this._trigger(this._replyEventName(t),e)}),this.presence=new F(this),this.broadcastEndpointURL=this._broadcastEndpointURL()}}let Y=()=>{},$="undefined"!=typeof WebSocket;class Q{connect(){if(!this.conn){if(this.transport){this.conn=new this.transport(this._endPointURL(),void 0,{headers:this.headers});return}if($){this.conn=new WebSocket(this._endPointURL()),this.setupConnection();return}this.conn=new ee(this._endPointURL(),void 0,{close:()=>{this.conn=null}}),n.e(336).then(n.t.bind(n,3336,23)).then(e=>{let{default:t}=e;this.conn=new t(this._endPointURL(),void 0,{headers:this.headers}),this.setupConnection()})}}disconnect(e,t){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,null!=t?t:""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset())}getChannels(){return this.channels}async removeChannel(e){let t=await e.unsubscribe();return 0===this.channels.length&&this.disconnect(),t}async removeAllChannels(){let e=await Promise.all(this.channels.map(e=>e.unsubscribe()));return this.disconnect(),e}log(e,t,n){this.logger(e,t,n)}connectionState(){switch(this.conn&&this.conn.readyState){case c.connecting:return f.Connecting;case c.open:return f.Open;case c.closing:return f.Closing;default:return f.Closed}}isConnected(){return this.connectionState()===f.Open}channel(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{config:{}},n=new X("realtime:".concat(e),t,this);return this.channels.push(n),n}push(e){let{topic:t,event:n,payload:r,ref:i}=e,s=()=>{this.encode(e,e=>{var t;null===(t=this.conn)||void 0===t||t.send(e)})};this.log("push","".concat(t," ").concat(n," (").concat(i,")"),r),this.isConnected()?s():this.sendBuffer.push(s)}setAuth(e){this.accessToken=e,this.channels.forEach(t=>{e&&t.updateJoinPayload({access_token:e}),t.joinedOnce&&t._isJoined()&&t._push(h.access_token,{access_token:e})})}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(t=>t.topic===e&&(t._isJoined()||t._isJoining()));t&&(this.log("transport",'leaving duplicate topic "'.concat(e,'"')),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t._joinRef()!==e._joinRef())}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_endPointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:"1.0.0"}))}_onConnMessage(e){this.decode(e.data,e=>{let{topic:t,event:n,payload:r,ref:i}=e;(i&&i===this.pendingHeartbeatRef||n===(null==r?void 0:r.type))&&(this.pendingHeartbeatRef=null),this.log("receive","".concat(r.status||""," ").concat(t," ").concat(n," ").concat(i&&"("+i+")"||""),r),this.channels.filter(e=>e._isMember(t)).forEach(e=>e._trigger(n,r,i)),this.stateChangeCallbacks.message.forEach(t=>t(e))})}_onConnOpen(){this.log("transport","connected to ".concat(this._endPointURL())),this._flushSendBuffer(),this.reconnectTimer.reset(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this._sendHeartbeat(),this.heartbeatIntervalMs),this.stateChangeCallbacks.open.forEach(e=>e())}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(t=>t(e))}_onConnError(e){this.log("transport",e.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(t=>t(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger(h.error))}_appendParams(e,t){if(0===Object.keys(t).length)return e;let n=e.match(/\?/)?"&":"?",r=new URLSearchParams(t);return"".concat(e).concat(n).concat(r)}_flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_sendHeartbeat(){var e;if(this.isConnected()){if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),null===(e=this.conn)||void 0===e||e.close(1e3,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.setAuth(this.accessToken)}}constructor(e,t){var r;this.accessToken=null,this.apiKey=null,this.channels=[],this.endPoint="",this.headers=D,this.params={},this.timeout=1e4,this.heartbeatIntervalMs=3e4,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.ref=0,this.logger=Y,this.conn=null,this.sendBuffer=[],this.serializer=new U,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this._resolveFetch=e=>{let t;return t=e||("undefined"==typeof fetch?function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return Promise.resolve().then(n.bind(n,469)).then(e=>{let{default:n}=e;return n(...t)})}:fetch),function(){for(var e=arguments.length,n=Array(e),r=0;r<e;r++)n[r]=arguments[r];return t(...n)}},this.endPoint="".concat(e,"/").concat(d.websocket),(null==t?void 0:t.transport)?this.transport=t.transport:this.transport=null,(null==t?void 0:t.params)&&(this.params=t.params),(null==t?void 0:t.headers)&&(this.headers=Object.assign(Object.assign({},this.headers),t.headers)),(null==t?void 0:t.timeout)&&(this.timeout=t.timeout),(null==t?void 0:t.logger)&&(this.logger=t.logger),(null==t?void 0:t.heartbeatIntervalMs)&&(this.heartbeatIntervalMs=t.heartbeatIntervalMs);let i=null===(r=null==t?void 0:t.params)||void 0===r?void 0:r.apikey;i&&(this.accessToken=i,this.apiKey=i),this.reconnectAfterMs=(null==t?void 0:t.reconnectAfterMs)?t.reconnectAfterMs:e=>[1e3,2e3,5e3,1e4][e-1]||1e4,this.encode=(null==t?void 0:t.encode)?t.encode:(e,t)=>t(JSON.stringify(e)),this.decode=(null==t?void 0:t.decode)?t.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new Z(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(null==t?void 0:t.fetch)}}class ee{constructor(e,t,n){this.binaryType="arraybuffer",this.onclose=()=>{},this.onerror=()=>{},this.onmessage=()=>{},this.onopen=()=>{},this.readyState=c.connecting,this.send=()=>{},this.url=null,this.url=e,this.close=n.close}}class et extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function en(e){return"object"==typeof e&&null!==e&&"__isStorageError"in e}class er extends et{toJSON(){return{name:this.name,message:this.message,status:this.status}}constructor(e,t){super(e),this.name="StorageApiError",this.status=t}}class ei extends et{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}}let es=e=>{let t;return t=e||("undefined"==typeof fetch?function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return Promise.resolve().then(n.bind(n,469)).then(e=>{let{default:n}=e;return n(...t)})}:fetch),function(){for(var e=arguments.length,n=Array(e),r=0;r<e;r++)n[r]=arguments[r];return t(...n)}},eo=()=>{var e,t,r,i;return e=void 0,t=void 0,r=void 0,i=function*(){return"undefined"==typeof Response?(yield Promise.resolve().then(n.bind(n,469))).Response:Response},new(r||(r=Promise))(function(n,s){function o(e){try{l(i.next(e))}catch(e){s(e)}}function a(e){try{l(i.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?n(e.value):((t=e.value)instanceof r?t:new r(function(e){e(t)})).then(o,a)}l((i=i.apply(e,t||[])).next())})};var ea=function(e,t,n,r){return new(n||(n=Promise))(function(i,s){function o(e){try{l(r.next(e))}catch(e){s(e)}}function a(e){try{l(r.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?i(e.value):((t=e.value)instanceof n?t:new n(function(e){e(t)})).then(o,a)}l((r=r.apply(e,t||[])).next())})};let el=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),ec=(e,t)=>ea(void 0,void 0,void 0,function*(){e instanceof(yield eo())?e.json().then(n=>{t(new er(el(n),e.status||500))}).catch(e=>{t(new ei(el(e),e))}):t(new ei(el(e),e))}),eu=(e,t,n,r)=>{let i={method:e,headers:(null==t?void 0:t.headers)||{}};return"GET"===e?i:(i.headers=Object.assign({"Content-Type":"application/json"},null==t?void 0:t.headers),i.body=JSON.stringify(r),Object.assign(Object.assign({},i),n))};function eh(e,t,n,r,i,s){return ea(this,void 0,void 0,function*(){return new Promise((o,a)=>{e(n,eu(t,r,i,s)).then(e=>{if(!e.ok)throw e;return(null==r?void 0:r.noResolveJson)?e:e.json()}).then(e=>o(e)).catch(e=>ec(e,a))})})}function ed(e,t,n,r){return ea(this,void 0,void 0,function*(){return eh(e,"GET",t,n,r)})}function ef(e,t,n,r,i){return ea(this,void 0,void 0,function*(){return eh(e,"POST",t,r,i,n)})}function ep(e,t,n,r,i){return ea(this,void 0,void 0,function*(){return eh(e,"DELETE",t,r,i,n)})}var ev=function(e,t,n,r){return new(n||(n=Promise))(function(i,s){function o(e){try{l(r.next(e))}catch(e){s(e)}}function a(e){try{l(r.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?i(e.value):((t=e.value)instanceof n?t:new n(function(e){e(t)})).then(o,a)}l((r=r.apply(e,t||[])).next())})};let eg={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},em={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class ey{uploadOrUpdate(e,t,n,r){return ev(this,void 0,void 0,function*(){try{let i;let s=Object.assign(Object.assign({},em),r),o=Object.assign(Object.assign({},this.headers),"POST"===e&&{"x-upsert":String(s.upsert)});"undefined"!=typeof Blob&&n instanceof Blob?((i=new FormData).append("cacheControl",s.cacheControl),i.append("",n)):"undefined"!=typeof FormData&&n instanceof FormData?(i=n).append("cacheControl",s.cacheControl):(i=n,o["cache-control"]="max-age=".concat(s.cacheControl),o["content-type"]=s.contentType);let a=this._removeEmptyFolders(t),l=this._getFinalPath(a),c=yield this.fetch("".concat(this.url,"/object/").concat(l),Object.assign({method:e,body:i,headers:o},(null==s?void 0:s.duplex)?{duplex:s.duplex}:{})),u=yield c.json();if(c.ok)return{data:{path:a,id:u.Id,fullPath:u.Key},error:null};return{data:null,error:u}}catch(e){if(en(e))return{data:null,error:e};throw e}})}upload(e,t,n){return ev(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,t,n)})}uploadToSignedUrl(e,t,n,r){return ev(this,void 0,void 0,function*(){let i=this._removeEmptyFolders(e),s=this._getFinalPath(i),o=new URL(this.url+"/object/upload/sign/".concat(s));o.searchParams.set("token",t);try{let e;let t=Object.assign({upsert:em.upsert},r),s=Object.assign(Object.assign({},this.headers),{"x-upsert":String(t.upsert)});"undefined"!=typeof Blob&&n instanceof Blob?((e=new FormData).append("cacheControl",t.cacheControl),e.append("",n)):"undefined"!=typeof FormData&&n instanceof FormData?(e=n).append("cacheControl",t.cacheControl):(e=n,s["cache-control"]="max-age=".concat(t.cacheControl),s["content-type"]=t.contentType);let a=yield this.fetch(o.toString(),{method:"PUT",body:e,headers:s}),l=yield a.json();if(a.ok)return{data:{path:i,fullPath:l.Key},error:null};return{data:null,error:l}}catch(e){if(en(e))return{data:null,error:e};throw e}})}createSignedUploadUrl(e){return ev(this,void 0,void 0,function*(){try{let t=this._getFinalPath(e),n=yield ef(this.fetch,"".concat(this.url,"/object/upload/sign/").concat(t),{},{headers:this.headers}),r=new URL(this.url+n.url),i=r.searchParams.get("token");if(!i)throw new et("No token returned by API");return{data:{signedUrl:r.toString(),path:e,token:i},error:null}}catch(e){if(en(e))return{data:null,error:e};throw e}})}update(e,t,n){return ev(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,t,n)})}move(e,t){return ev(this,void 0,void 0,function*(){try{return{data:yield ef(this.fetch,"".concat(this.url,"/object/move"),{bucketId:this.bucketId,sourceKey:e,destinationKey:t},{headers:this.headers}),error:null}}catch(e){if(en(e))return{data:null,error:e};throw e}})}copy(e,t){return ev(this,void 0,void 0,function*(){try{return{data:{path:(yield ef(this.fetch,"".concat(this.url,"/object/copy"),{bucketId:this.bucketId,sourceKey:e,destinationKey:t},{headers:this.headers})).Key},error:null}}catch(e){if(en(e))return{data:null,error:e};throw e}})}createSignedUrl(e,t,n){return ev(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e),i=yield ef(this.fetch,"".concat(this.url,"/object/sign/").concat(r),Object.assign({expiresIn:t},(null==n?void 0:n.transform)?{transform:n.transform}:{}),{headers:this.headers}),s=(null==n?void 0:n.download)?"&download=".concat(!0===n.download?"":n.download):"";return{data:i={signedUrl:encodeURI("".concat(this.url).concat(i.signedURL).concat(s))},error:null}}catch(e){if(en(e))return{data:null,error:e};throw e}})}createSignedUrls(e,t,n){return ev(this,void 0,void 0,function*(){try{let r=yield ef(this.fetch,"".concat(this.url,"/object/sign/").concat(this.bucketId),{expiresIn:t,paths:e},{headers:this.headers}),i=(null==n?void 0:n.download)?"&download=".concat(!0===n.download?"":n.download):"";return{data:r.map(e=>Object.assign(Object.assign({},e),{signedUrl:e.signedURL?encodeURI("".concat(this.url).concat(e.signedURL).concat(i)):null})),error:null}}catch(e){if(en(e))return{data:null,error:e};throw e}})}download(e,t){return ev(this,void 0,void 0,function*(){let n=void 0!==(null==t?void 0:t.transform),r=this.transformOptsToQueryString((null==t?void 0:t.transform)||{});try{let t=this._getFinalPath(e),i=yield ed(this.fetch,"".concat(this.url,"/").concat(n?"render/image/authenticated":"object","/").concat(t).concat(r?"?".concat(r):""),{headers:this.headers,noResolveJson:!0});return{data:yield i.blob(),error:null}}catch(e){if(en(e))return{data:null,error:e};throw e}})}getPublicUrl(e,t){let n=this._getFinalPath(e),r=[],i=(null==t?void 0:t.download)?"download=".concat(!0===t.download?"":t.download):"";""!==i&&r.push(i);let s=void 0!==(null==t?void 0:t.transform),o=this.transformOptsToQueryString((null==t?void 0:t.transform)||{});""!==o&&r.push(o);let a=r.join("&");return""!==a&&(a="?".concat(a)),{data:{publicUrl:encodeURI("".concat(this.url,"/").concat(s?"render/image":"object","/public/").concat(n).concat(a))}}}remove(e){return ev(this,void 0,void 0,function*(){try{return{data:yield ep(this.fetch,"".concat(this.url,"/object/").concat(this.bucketId),{prefixes:e},{headers:this.headers}),error:null}}catch(e){if(en(e))return{data:null,error:e};throw e}})}list(e,t,n){return ev(this,void 0,void 0,function*(){try{let r=Object.assign(Object.assign(Object.assign({},eg),t),{prefix:e||""});return{data:yield ef(this.fetch,"".concat(this.url,"/object/list/").concat(this.bucketId),r,{headers:this.headers},n),error:null}}catch(e){if(en(e))return{data:null,error:e};throw e}})}_getFinalPath(e){return"".concat(this.bucketId,"/").concat(e)}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){let t=[];return e.width&&t.push("width=".concat(e.width)),e.height&&t.push("height=".concat(e.height)),e.resize&&t.push("resize=".concat(e.resize)),e.format&&t.push("format=".concat(e.format)),e.quality&&t.push("quality=".concat(e.quality)),t.join("&")}constructor(e,t={},n,r){this.url=e,this.headers=t,this.bucketId=n,this.fetch=es(r)}}let eb={"X-Client-Info":"storage-js/".concat("2.5.5")};var ew=function(e,t,n,r){return new(n||(n=Promise))(function(i,s){function o(e){try{l(r.next(e))}catch(e){s(e)}}function a(e){try{l(r.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?i(e.value):((t=e.value)instanceof n?t:new n(function(e){e(t)})).then(o,a)}l((r=r.apply(e,t||[])).next())})};class e_{listBuckets(){return ew(this,void 0,void 0,function*(){try{return{data:yield ed(this.fetch,"".concat(this.url,"/bucket"),{headers:this.headers}),error:null}}catch(e){if(en(e))return{data:null,error:e};throw e}})}getBucket(e){return ew(this,void 0,void 0,function*(){try{return{data:yield ed(this.fetch,"".concat(this.url,"/bucket/").concat(e),{headers:this.headers}),error:null}}catch(e){if(en(e))return{data:null,error:e};throw e}})}createBucket(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{public:!1};return ew(this,void 0,void 0,function*(){try{return{data:yield ef(this.fetch,"".concat(this.url,"/bucket"),{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(e){if(en(e))return{data:null,error:e};throw e}})}updateBucket(e,t){return ew(this,void 0,void 0,function*(){try{return{data:yield function(e,t,n,r,i){return ea(this,void 0,void 0,function*(){return eh(e,"PUT",t,r,void 0,n)})}(this.fetch,"".concat(this.url,"/bucket/").concat(e),{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(e){if(en(e))return{data:null,error:e};throw e}})}emptyBucket(e){return ew(this,void 0,void 0,function*(){try{return{data:yield ef(this.fetch,"".concat(this.url,"/bucket/").concat(e,"/empty"),{},{headers:this.headers}),error:null}}catch(e){if(en(e))return{data:null,error:e};throw e}})}deleteBucket(e){return ew(this,void 0,void 0,function*(){try{return{data:yield ep(this.fetch,"".concat(this.url,"/bucket/").concat(e),{},{headers:this.headers}),error:null}}catch(e){if(en(e))return{data:null,error:e};throw e}})}constructor(e,t={},n){this.url=e,this.headers=Object.assign(Object.assign({},eb),t),this.fetch=es(n)}}class ek extends e_{from(e){return new ey(this.url,this.headers,e,this.fetch)}constructor(e,t={},n){super(e,t,n)}}let eE="";eE="undefined"!=typeof Deno?"deno":"undefined"!=typeof document?"web":"undefined"!=typeof navigator&&"ReactNative"===navigator.product?"react-native":"node";let eS={headers:{"X-Client-Info":"supabase-js-".concat(eE,"/").concat("2.39.7")}},eT={schema:"public"},ex={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},eP={},eO=e=>{let t;return t=e||("undefined"==typeof fetch?O.default:fetch),function(){for(var e=arguments.length,n=Array(e),r=0;r<e;r++)n[r]=arguments[r];return t(...n)}},ej=()=>"undefined"==typeof Headers?O.Headers:Headers,eR=(e,t,n)=>{let r=eO(n),i=ej();return(n,s)=>{var o,a,l,c;return o=void 0,a=void 0,l=void 0,c=function*(){var o;let a=null!==(o=yield t())&&void 0!==o?o:e,l=new i(null==s?void 0:s.headers);return l.has("apikey")||l.set("apikey",e),l.has("Authorization")||l.set("Authorization","Bearer ".concat(a)),r(n,Object.assign(Object.assign({},s),{headers:l}))},new(l||(l=Promise))(function(e,t){function n(e){try{i(c.next(e))}catch(e){t(e)}}function r(e){try{i(c.throw(e))}catch(e){t(e)}}function i(t){var i;t.done?e(t.value):((i=t.value)instanceof l?i:new l(function(e){e(i)})).then(n,r)}i((c=c.apply(o,a||[])).next())})}},eC=()=>"undefined"!=typeof document,eA={tested:!1,writable:!1},eI=()=>{if(!eC())return!1;try{if("object"!=typeof globalThis.localStorage)return!1}catch(e){return!1}if(eA.tested)return eA.writable;let e="lswt-".concat(Math.random()).concat(Math.random());try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),eA.tested=!0,eA.writable=!0}catch(e){eA.tested=!0,eA.writable=!1}return eA.writable};function eL(e){let t={},n=new URL(e);if(n.hash&&"#"===n.hash[0])try{new URLSearchParams(n.hash.substring(1)).forEach((e,n)=>{t[n]=e})}catch(e){}return n.searchParams.forEach((e,n)=>{t[n]=e}),t}let eN=e=>{let t;return t=e||("undefined"==typeof fetch?function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return Promise.resolve().then(n.bind(n,469)).then(e=>{let{default:n}=e;return n(...t)})}:fetch),function(){for(var e=arguments.length,n=Array(e),r=0;r<e;r++)n[r]=arguments[r];return t(...n)}},eD=e=>"object"==typeof e&&null!==e&&"status"in e&&"ok"in e&&"json"in e&&"function"==typeof e.json,eZ=async(e,t,n)=>{await e.setItem(t,JSON.stringify(n))},eU=async(e,t)=>{let n=await e.getItem(t);if(!n)return null;try{return JSON.parse(n)}catch(e){return n}},eM=async(e,t)=>{await e.removeItem(t)};class eF{constructor(){this.promise=new eF.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}function ez(e){let t=e.split(".");if(3!==t.length)throw Error("JWT is not valid: not a JWT structure");if(!/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}=?$|[a-z0-9_-]{2}(==)?$)$/i.test(t[1]))throw Error("JWT is not valid: payload is not in base64url format");return JSON.parse(function(e){let t,n,r,i,s,o,a;let l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",c="",u=0;for(e=e.replace("-","+").replace("_","/");u<e.length;)i=l.indexOf(e.charAt(u++)),s=l.indexOf(e.charAt(u++)),o=l.indexOf(e.charAt(u++)),a=l.indexOf(e.charAt(u++)),t=i<<2|s>>4,n=(15&s)<<4|o>>2,r=(3&o)<<6|a,c+=String.fromCharCode(t),64!=o&&0!=n&&(c+=String.fromCharCode(n)),64!=a&&0!=r&&(c+=String.fromCharCode(r));return c}(t[1]))}async function eK(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function eq(e){return("0"+e.toString(16)).substr(-2)}function eB(){let e=new Uint32Array(56);if("undefined"==typeof crypto){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",t=e.length,n="";for(let r=0;r<56;r++)n+=e.charAt(Math.floor(Math.random()*t));return n}return crypto.getRandomValues(e),Array.from(e,eq).join("")}async function eH(e){let t=new TextEncoder().encode(e),n=await crypto.subtle.digest("SHA-256",t);return Array.from(new Uint8Array(n)).map(e=>String.fromCharCode(e)).join("")}async function eJ(e){return"undefined"!=typeof crypto&&void 0!==crypto.subtle&&"undefined"!=typeof TextEncoder?btoa(await eH(e)).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,""):(console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e)}eF.promiseConstructor=Promise;class eG extends Error{constructor(e,t){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t}}function eW(e){return"object"==typeof e&&null!==e&&"__isAuthError"in e}class eV extends eG{toJSON(){return{name:this.name,message:this.message,status:this.status}}constructor(e,t){super(e,t),this.name="AuthApiError",this.status=t}}class eX extends eG{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class eY extends eG{toJSON(){return{name:this.name,message:this.message,status:this.status}}constructor(e,t,n){super(e),this.name=t,this.status=n}}class e$ extends eY{constructor(){super("Auth session missing!","AuthSessionMissingError",400)}}class eQ extends eY{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500)}}class e0 extends eY{constructor(e){super(e,"AuthInvalidCredentialsError",400)}}class e1 extends eY{toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500),this.details=null,this.details=t}}class e2 extends eY{toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}constructor(e,t=null){super(e,"AuthPKCEGrantCodeExchangeError",500),this.details=null,this.details=t}}class e4 extends eY{constructor(e,t){super(e,"AuthRetryableFetchError",t)}}function e3(e){return eW(e)&&"AuthRetryableFetchError"===e.name}class e6 extends eY{constructor(e,t,n){super(e,"AuthWeakPasswordError",t),this.reasons=n}}var e5=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&0>t.indexOf(r)&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)0>t.indexOf(r[i])&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};let e9=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),e7=[502,503,504];async function e8(e){let t;if(!eD(e))throw new e4(e9(e),0);if(e7.includes(e.status))throw new e4(e9(e),e.status);try{t=await e.json()}catch(e){throw new eX(e9(e),e)}if("object"==typeof t&&t&&"object"==typeof t.weak_password&&t.weak_password&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.reasons.reduce((e,t)=>e&&"string"==typeof t,!0))throw new e6(e9(t),e.status,t.weak_password.reasons);throw new eV(e9(t),e.status||500)}let te=(e,t,n,r)=>{let i={method:e,headers:(null==t?void 0:t.headers)||{}};return"GET"===e?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},null==t?void 0:t.headers),i.body=JSON.stringify(r),Object.assign(Object.assign({},i),n))};async function tt(e,t,n,r){var i;let s=Object.assign({},null==r?void 0:r.headers);(null==r?void 0:r.jwt)&&(s.Authorization="Bearer ".concat(r.jwt));let o=null!==(i=null==r?void 0:r.query)&&void 0!==i?i:{};(null==r?void 0:r.redirectTo)&&(o.redirect_to=r.redirectTo);let a=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",l=await tn(e,t,n+a,{headers:s,noResolveJson:null==r?void 0:r.noResolveJson},{},null==r?void 0:r.body);return(null==r?void 0:r.xform)?null==r?void 0:r.xform(l):{data:Object.assign({},l),error:null}}async function tn(e,t,n,r,i,s){let o;let a=te(t,r,i,s);try{o=await e(n,a)}catch(e){throw console.error(e),new e4(e9(e),0)}if(o.ok||await e8(o),null==r?void 0:r.noResolveJson)return o;try{return await o.json()}catch(e){await e8(e)}}function tr(e){var t,n;let r=null;return e.access_token&&e.refresh_token&&e.expires_in&&(r=Object.assign({},e),!e.expires_at)&&(r.expires_at=(n=e.expires_in,Math.round(Date.now()/1e3)+n)),{data:{session:r,user:null!==(t=e.user)&&void 0!==t?t:e},error:null}}function ti(e){let t=tr(e);return!t.error&&e.weak_password&&"object"==typeof e.weak_password&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&"string"==typeof e.weak_password.message&&e.weak_password.reasons.reduce((e,t)=>e&&"string"==typeof t,!0)&&(t.data.weak_password=e.weak_password),t}function ts(e){var t;return{data:{user:null!==(t=e.user)&&void 0!==t?t:e},error:null}}function to(e){return{data:e,error:null}}function ta(e){let{action_link:t,email_otp:n,hashed_token:r,redirect_to:i,verification_type:s}=e;return{data:{properties:{action_link:t,email_otp:n,hashed_token:r,redirect_to:i,verification_type:s},user:Object.assign({},e5(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]))},error:null}}function tl(e){return e}var tc=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&0>t.indexOf(r)&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)0>t.indexOf(r[i])&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};class tu{async signOut(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"global";try{return await tt(this.fetch,"POST","".concat(this.url,"/logout?scope=").concat(t),{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(e){if(eW(e))return{data:null,error:e};throw e}}async inviteUserByEmail(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{return await tt(this.fetch,"POST","".concat(this.url,"/invite"),{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:ts})}catch(e){if(eW(e))return{data:{user:null},error:e};throw e}}async generateLink(e){try{let{options:t}=e,n=tc(e,["options"]),r=Object.assign(Object.assign({},n),t);return"newEmail"in n&&(r.new_email=null==n?void 0:n.newEmail,delete r.newEmail),await tt(this.fetch,"POST","".concat(this.url,"/admin/generate_link"),{body:r,headers:this.headers,xform:ta,redirectTo:null==t?void 0:t.redirectTo})}catch(e){if(eW(e))return{data:{properties:null,user:null},error:e};throw e}}async createUser(e){try{return await tt(this.fetch,"POST","".concat(this.url,"/admin/users"),{body:e,headers:this.headers,xform:ts})}catch(e){if(eW(e))return{data:{user:null},error:e};throw e}}async listUsers(e){var t,n,r,i,s,o,a;try{let l={nextPage:null,lastPage:0,total:0},c=await tt(this.fetch,"GET","".concat(this.url,"/admin/users"),{headers:this.headers,noResolveJson:!0,query:{page:null!==(n=null===(t=null==e?void 0:e.page)||void 0===t?void 0:t.toString())&&void 0!==n?n:"",per_page:null!==(i=null===(r=null==e?void 0:e.perPage)||void 0===r?void 0:r.toString())&&void 0!==i?i:""},xform:tl});if(c.error)throw c.error;let u=await c.json(),h=null!==(s=c.headers.get("x-total-count"))&&void 0!==s?s:0,d=null!==(a=null===(o=c.headers.get("link"))||void 0===o?void 0:o.split(","))&&void 0!==a?a:[];return d.length>0&&(d.forEach(e=>{let t=parseInt(e.split(";")[0].split("=")[1].substring(0,1)),n=JSON.parse(e.split(";")[1].split("=")[1]);l["".concat(n,"Page")]=t}),l.total=parseInt(h)),{data:Object.assign(Object.assign({},u),l),error:null}}catch(e){if(eW(e))return{data:{users:[]},error:e};throw e}}async getUserById(e){try{return await tt(this.fetch,"GET","".concat(this.url,"/admin/users/").concat(e),{headers:this.headers,xform:ts})}catch(e){if(eW(e))return{data:{user:null},error:e};throw e}}async updateUserById(e,t){try{return await tt(this.fetch,"PUT","".concat(this.url,"/admin/users/").concat(e),{body:t,headers:this.headers,xform:ts})}catch(e){if(eW(e))return{data:{user:null},error:e};throw e}}async deleteUser(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];try{return await tt(this.fetch,"DELETE","".concat(this.url,"/admin/users/").concat(e),{headers:this.headers,body:{should_soft_delete:t},xform:ts})}catch(e){if(eW(e))return{data:{user:null},error:e};throw e}}async _listFactors(e){try{let{data:t,error:n}=await tt(this.fetch,"GET","".concat(this.url,"/admin/users/").concat(e.userId,"/factors"),{headers:this.headers,xform:e=>({data:{factors:e},error:null})});return{data:t,error:n}}catch(e){if(eW(e))return{data:null,error:e};throw e}}async _deleteFactor(e){try{return{data:await tt(this.fetch,"DELETE","".concat(this.url,"/admin/users/").concat(e.userId,"/factors/").concat(e.id),{headers:this.headers}),error:null}}catch(e){if(eW(e))return{data:null,error:e};throw e}}constructor({url:e="",headers:t={},fetch:n}){this.url=e,this.headers=t,this.fetch=eN(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}}let th="0.0.0",td={getItem:e=>eI()?globalThis.localStorage.getItem(e):null,setItem:(e,t)=>{eI()&&globalThis.localStorage.setItem(e,t)},removeItem:e=>{eI()&&globalThis.localStorage.removeItem(e)}};function tf(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{getItem:t=>e[t]||null,setItem:(t,n)=>{e[t]=n},removeItem:t=>{delete e[t]}}}let tp={debug:!!(globalThis&&eI()&&globalThis.localStorage&&"true"===globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug"))};class tv extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class tg extends tv{}async function tm(e,t,n){tp.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);let r=new globalThis.AbortController;return t>0&&setTimeout(()=>{r.abort(),tp.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await globalThis.navigator.locks.request(e,0===t?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async r=>{if(r){tp.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,r.name);try{return await n()}finally{tp.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,r.name)}}else{if(0===t)throw tp.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new tg('Acquiring an exclusive Navigator LockManager lock "'.concat(e,'" immediately failed'));if(tp.debug)try{let e=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(e,null,"  "))}catch(e){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",e)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}})}!function(){if("object"!=typeof globalThis)try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch(e){"undefined"!=typeof self&&(self.globalThis=self)}}();let ty={url:"http://localhost:9999",storageKey:"supabase.auth.token",autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:{"X-Client-Info":"gotrue-js/".concat(th)},flowType:"implicit",debug:!1};async function tb(e,t,n){return await n()}class tw{_debug(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.logDebugMessages&&this.logger("GoTrueClient@".concat(this.instanceID," (").concat(th,") ").concat(new Date().toISOString()),...t),this}async initialize(){return this.initializePromise||(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))()),await this.initializePromise}async _initialize(){try{let e=!!eC()&&await this._isPKCEFlow();if(this._debug("#_initialize()","begin","is PKCE flow",e),e||this.detectSessionInUrl&&this._isImplicitGrantFlow()){let{data:t,error:n}=await this._getSessionFromURL(e);if(n){if(this._debug("#_initialize()","error detecting session from URL",n),(null==n?void 0:n.message)==="Identity is already linked"||(null==n?void 0:n.message)==="Identity is already linked to another user")return{error:n};return await this._removeSession(),{error:n}}let{session:r,redirectType:i}=t;return this._debug("#_initialize()","detected session in URL",r,"redirect type",i),await this._saveSession(r),setTimeout(async()=>{"recovery"===i?await this._notifyAllSubscribers("PASSWORD_RECOVERY",r):await this._notifyAllSubscribers("SIGNED_IN",r)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(e){if(eW(e))return{error:e};return{error:new eX("Unexpected error during initialization",e)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signUp(e){var t,n,r;try{let i;if(await this._removeSession(),"email"in e){let{email:n,password:r,options:s}=e,o=null,a=null;if("pkce"===this.flowType){let e=eB();await eZ(this.storage,"".concat(this.storageKey,"-code-verifier"),e),o=await eJ(e),a=e===o?"plain":"s256"}i=await tt(this.fetch,"POST","".concat(this.url,"/signup"),{headers:this.headers,redirectTo:null==s?void 0:s.emailRedirectTo,body:{email:n,password:r,data:null!==(t=null==s?void 0:s.data)&&void 0!==t?t:{},gotrue_meta_security:{captcha_token:null==s?void 0:s.captchaToken},code_challenge:o,code_challenge_method:a},xform:tr})}else if("phone"in e){let{phone:t,password:s,options:o}=e;i=await tt(this.fetch,"POST","".concat(this.url,"/signup"),{headers:this.headers,body:{phone:t,password:s,data:null!==(n=null==o?void 0:o.data)&&void 0!==n?n:{},channel:null!==(r=null==o?void 0:o.channel)&&void 0!==r?r:"sms",gotrue_meta_security:{captcha_token:null==o?void 0:o.captchaToken}},xform:tr})}else throw new e0("You must provide either an email or phone number and a password");let{data:s,error:o}=i;if(o||!s)return{data:{user:null,session:null},error:o};let a=s.session,l=s.user;return s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",a)),{data:{user:l,session:a},error:null}}catch(e){if(eW(e))return{data:{user:null,session:null},error:e};throw e}}async signInWithPassword(e){try{let t;if(await this._removeSession(),"email"in e){let{email:n,password:r,options:i}=e;t=await tt(this.fetch,"POST","".concat(this.url,"/token?grant_type=password"),{headers:this.headers,body:{email:n,password:r,gotrue_meta_security:{captcha_token:null==i?void 0:i.captchaToken}},xform:ti})}else if("phone"in e){let{phone:n,password:r,options:i}=e;t=await tt(this.fetch,"POST","".concat(this.url,"/token?grant_type=password"),{headers:this.headers,body:{phone:n,password:r,gotrue_meta_security:{captcha_token:null==i?void 0:i.captchaToken}},xform:ti})}else throw new e0("You must provide either an email or phone number and a password");let{data:n,error:r}=t;if(r)return{data:{user:null,session:null},error:r};if(!n||!n.session||!n.user)return{data:{user:null,session:null},error:new eQ};return n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),{data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:r}}catch(e){if(eW(e))return{data:{user:null,session:null},error:e};throw e}}async signInWithOAuth(e){var t,n,r,i;return await this._removeSession(),await this._handleProviderSignIn(e.provider,{redirectTo:null===(t=e.options)||void 0===t?void 0:t.redirectTo,scopes:null===(n=e.options)||void 0===n?void 0:n.scopes,queryParams:null===(r=e.options)||void 0===r?void 0:r.queryParams,skipBrowserRedirect:null===(i=e.options)||void 0===i?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async _exchangeCodeForSession(e){let t=await eU(this.storage,"".concat(this.storageKey,"-code-verifier")),[n,r]=(null!=t?t:"").split("/"),{data:i,error:s}=await tt(this.fetch,"POST","".concat(this.url,"/token?grant_type=pkce"),{headers:this.headers,body:{auth_code:e,code_verifier:n},xform:tr});return(await eM(this.storage,"".concat(this.storageKey,"-code-verifier")),s)?{data:{user:null,session:null,redirectType:null},error:s}:i&&i.session&&i.user?(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign(Object.assign({},i),{redirectType:null!=r?r:null}),error:s}):{data:{user:null,session:null,redirectType:null},error:new eQ}}async signInWithIdToken(e){await this._removeSession();try{let{options:t,provider:n,token:r,access_token:i,nonce:s}=e,{data:o,error:a}=await tt(this.fetch,"POST","".concat(this.url,"/token?grant_type=id_token"),{headers:this.headers,body:{provider:n,id_token:r,access_token:i,nonce:s,gotrue_meta_security:{captcha_token:null==t?void 0:t.captchaToken}},xform:tr});if(a)return{data:{user:null,session:null},error:a};if(!o||!o.session||!o.user)return{data:{user:null,session:null},error:new eQ};return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",o.session)),{data:o,error:a}}catch(e){if(eW(e))return{data:{user:null,session:null},error:e};throw e}}async signInWithOtp(e){var t,n,r,i,s;try{if(await this._removeSession(),"email"in e){let{email:r,options:i}=e,s=null,o=null;if("pkce"===this.flowType){let e=eB();await eZ(this.storage,"".concat(this.storageKey,"-code-verifier"),e),s=await eJ(e),o=e===s?"plain":"s256"}let{error:a}=await tt(this.fetch,"POST","".concat(this.url,"/otp"),{headers:this.headers,body:{email:r,data:null!==(t=null==i?void 0:i.data)&&void 0!==t?t:{},create_user:null===(n=null==i?void 0:i.shouldCreateUser)||void 0===n||n,gotrue_meta_security:{captcha_token:null==i?void 0:i.captchaToken},code_challenge:s,code_challenge_method:o},redirectTo:null==i?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:a}}if("phone"in e){let{phone:t,options:n}=e,{data:o,error:a}=await tt(this.fetch,"POST","".concat(this.url,"/otp"),{headers:this.headers,body:{phone:t,data:null!==(r=null==n?void 0:n.data)&&void 0!==r?r:{},create_user:null===(i=null==n?void 0:n.shouldCreateUser)||void 0===i||i,gotrue_meta_security:{captcha_token:null==n?void 0:n.captchaToken},channel:null!==(s=null==n?void 0:n.channel)&&void 0!==s?s:"sms"}});return{data:{user:null,session:null,messageId:null==o?void 0:o.message_id},error:a}}throw new e0("You must provide either an email or phone number.")}catch(e){if(eW(e))return{data:{user:null,session:null},error:e};throw e}}async verifyOtp(e){var t,n;try{let r,i;"email_change"!==e.type&&"phone_change"!==e.type&&await this._removeSession(),"options"in e&&(r=null===(t=e.options)||void 0===t?void 0:t.redirectTo,i=null===(n=e.options)||void 0===n?void 0:n.captchaToken);let{data:s,error:o}=await tt(this.fetch,"POST","".concat(this.url,"/verify"),{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:i}}),redirectTo:r,xform:tr});if(o)throw o;if(!s)throw Error("An error occurred on token verification.");let a=s.session,l=s.user;return(null==a?void 0:a.access_token)&&(await this._saveSession(a),await this._notifyAllSubscribers("recovery"==e.type?"PASSWORD_RECOVERY":"SIGNED_IN",a)),{data:{user:l,session:a},error:null}}catch(e){if(eW(e))return{data:{user:null,session:null},error:e};throw e}}async signInWithSSO(e){var t,n,r;try{await this._removeSession();let i=null,s=null;if("pkce"===this.flowType){let e=eB();await eZ(this.storage,"".concat(this.storageKey,"-code-verifier"),e),i=await eJ(e),s=e===i?"plain":"s256"}return await tt(this.fetch,"POST","".concat(this.url,"/sso"),{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:null!==(n=null===(t=e.options)||void 0===t?void 0:t.redirectTo)&&void 0!==n?n:void 0}),(null===(r=null==e?void 0:e.options)||void 0===r?void 0:r.captchaToken)?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:s}),headers:this.headers,xform:to})}catch(e){if(eW(e))return{data:null,error:e};throw e}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{let{data:{session:t},error:n}=e;if(n)throw n;if(!t)throw new e$;let{error:r}=await tt(this.fetch,"GET","".concat(this.url,"/reauthenticate"),{headers:this.headers,jwt:t.access_token});return{data:{user:null,session:null},error:r}})}catch(e){if(eW(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{"email_change"!=e.type&&"phone_change"!=e.type&&await this._removeSession();let t="".concat(this.url,"/resend");if("email"in e){let{email:n,type:r,options:i}=e,{error:s}=await tt(this.fetch,"POST",t,{headers:this.headers,body:{email:n,type:r,gotrue_meta_security:{captcha_token:null==i?void 0:i.captchaToken}},redirectTo:null==i?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:s}}if("phone"in e){let{phone:n,type:r,options:i}=e,{data:s,error:o}=await tt(this.fetch,"POST",t,{headers:this.headers,body:{phone:n,type:r,gotrue_meta_security:{captcha_token:null==i?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:null==s?void 0:s.message_id},error:o}}throw new e0("You must provide either an email or phone number and a type")}catch(e){if(eW(e))return{data:{user:null,session:null},error:e};throw e}}async getSession(){return await this.initializePromise,this._acquireLock(-1,async()=>this._useSession(async e=>e))}async _acquireLock(e,t){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){let e=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),n=(async()=>(await e,await t()))();return this.pendingInLock.push((async()=>{try{await n}catch(e){}})()),n}return await this.lock("lock:".concat(this.storageKey),e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;let e=t();for(this.pendingInLock.push((async()=>{try{await e}catch(e){}})()),await e;this.pendingInLock.length;){let e=[...this.pendingInLock];await Promise.all(e),this.pendingInLock.splice(0,e.length)}return await e}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{let t=await this.__loadSession();return await e(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",Error().stack);try{let e=null,t=await eU(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),null!==t&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};let n=!!e.expires_at&&e.expires_at<=Date.now()/1e3;if(this._debug("#__loadSession()","session has".concat(n?"":" not"," expired"),"expires_at",e.expires_at),!n)return{data:{session:e},error:null};let{session:r,error:i}=await this._callRefreshToken(e.refresh_token);if(i)return{data:{session:null},error:i};return{data:{session:r},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{if(e)return await tt(this.fetch,"GET","".concat(this.url,"/user"),{headers:this.headers,jwt:e,xform:ts});return await this._useSession(async e=>{var t,n;let{data:r,error:i}=e;if(i)throw i;return await tt(this.fetch,"GET","".concat(this.url,"/user"),{headers:this.headers,jwt:null!==(n=null===(t=r.session)||void 0===t?void 0:t.access_token)&&void 0!==n?n:void 0,xform:ts})})}catch(e){if(eW(e))return{data:{user:null},error:e};throw e}}async updateUser(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,t))}async _updateUser(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{return await this._useSession(async n=>{let{data:r,error:i}=n;if(i)throw i;if(!r.session)throw new e$;let s=r.session,o=null,a=null;if("pkce"===this.flowType&&null!=e.email){let e=eB();await eZ(this.storage,"".concat(this.storageKey,"-code-verifier"),e),o=await eJ(e),a=e===o?"plain":"s256"}let{data:l,error:c}=await tt(this.fetch,"PUT","".concat(this.url,"/user"),{headers:this.headers,redirectTo:null==t?void 0:t.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:o,code_challenge_method:a}),jwt:s.access_token,xform:ts});if(c)throw c;return s.user=l.user,await this._saveSession(s),await this._notifyAllSubscribers("USER_UPDATED",s),{data:{user:s.user},error:null}})}catch(e){if(eW(e))return{data:{user:null},error:e};throw e}}_decodeJWT(e){return ez(e)}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new e$;let t=Date.now()/1e3,n=t,r=!0,i=null,s=ez(e.access_token);if(s.exp&&(r=(n=s.exp)<=t),r){let{session:t,error:n}=await this._callRefreshToken(e.refresh_token);if(n)return{data:{user:null,session:null},error:n};if(!t)return{data:{user:null,session:null},error:null};i=t}else{let{data:r,error:s}=await this._getUser(e.access_token);if(s)throw s;i={access_token:e.access_token,refresh_token:e.refresh_token,user:r.user,token_type:"bearer",expires_in:n-t,expires_at:n},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(e){if(eW(e))return{data:{session:null,user:null},error:e};throw e}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async t=>{var n;if(!e){let{data:r,error:i}=t;if(i)throw i;e=null!==(n=r.session)&&void 0!==n?n:void 0}if(!(null==e?void 0:e.refresh_token))throw new e$;let{session:r,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{user:null,session:null},error:i}:r?{data:{user:r.user,session:r},error:null}:{data:{user:null,session:null},error:null}})}catch(e){if(eW(e))return{data:{user:null,session:null},error:e};throw e}}async _getSessionFromURL(e){try{if(!eC())throw new e1("No browser detected.");if("implicit"!==this.flowType||this._isImplicitGrantFlow()){if("pkce"==this.flowType&&!e)throw new e2("Not a valid PKCE flow url.")}else throw new e1("Not a valid implicit grant flow url.");let t=eL(window.location.href);if(e){if(!t.code)throw new e2("No code detected.");let{data:e,error:n}=await this._exchangeCodeForSession(t.code);if(n)throw n;let r=new URL(window.location.href);return r.searchParams.delete("code"),window.history.replaceState(window.history.state,"",r.toString()),{data:{session:e.session,redirectType:null},error:null}}if(t.error||t.error_description||t.error_code)throw new e1(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});let{provider_token:n,provider_refresh_token:r,access_token:i,refresh_token:s,expires_in:o,expires_at:a,token_type:l}=t;if(!i||!o||!s||!l)throw new e1("No session defined in URL");let c=Math.round(Date.now()/1e3),u=parseInt(o),h=c+u;a&&(h=parseInt(a));let d=h-c;1e3*d<=3e4&&console.warn("@supabase/gotrue-js: Session as retrieved from URL expires in ".concat(d,"s, should have been closer to ").concat(u,"s"));let f=h-u;c-f>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",f,h,c):c-f<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clok for skew",f,h,c);let{data:p,error:v}=await this._getUser(i);if(v)throw v;let g={provider_token:n,provider_refresh_token:r,access_token:i,expires_in:u,expires_at:h,refresh_token:s,token_type:l,user:p.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:g,redirectType:t.type},error:null}}catch(e){if(eW(e))return{data:{session:null,redirectType:null},error:e};throw e}}_isImplicitGrantFlow(){let e=eL(window.location.href);return!!(eC()&&(e.access_token||e.error_description))}async _isPKCEFlow(){let e=eL(window.location.href),t=await eU(this.storage,"".concat(this.storageKey,"-code-verifier"));return!!(e.code&&t)}async signOut(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{scope:"global"};return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut(){let{scope:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{scope:"global"};return await this._useSession(async t=>{var n;let{data:r,error:i}=t;if(i)return{error:i};let s=null===(n=r.session)||void 0===n?void 0:n.access_token;if(s){let{error:t}=await this.admin.signOut(s,e);if(t&&!(eW(t)&&"AuthApiError"===t.name&&(404===t.status||401===t.status)))return{error:t}}return"others"!==e&&(await this._removeSession(),await eM(this.storage,"".concat(this.storageKey,"-code-verifier")),await this._notifyAllSubscribers("SIGNED_OUT",null)),{error:null}})}onAuthStateChange(e){let t="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){let t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)}),n={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,n),(async()=>{await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(t)})})(),{data:{subscription:n}}}async _emitInitialSession(e){return await this._useSession(async t=>{var n,r;try{let{data:{session:r},error:i}=t;if(i)throw i;await (null===(n=this.stateChangeEmitters.get(e))||void 0===n?void 0:n.callback("INITIAL_SESSION",r)),this._debug("INITIAL_SESSION","callback id",e,"session",r)}catch(t){await (null===(r=this.stateChangeEmitters.get(e))||void 0===r?void 0:r.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",t),console.error(t)}})}async resetPasswordForEmail(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=null,r=null;if("pkce"===this.flowType){let e=eB();await eZ(this.storage,"".concat(this.storageKey,"-code-verifier"),"".concat(e,"/PASSWORD_RECOVERY")),n=await eJ(e),r=e===n?"plain":"s256"}try{return await tt(this.fetch,"POST","".concat(this.url,"/recover"),{body:{email:e,code_challenge:n,code_challenge_method:r,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(e){if(eW(e))return{data:null,error:e};throw e}}async getUserIdentities(){var e;try{let{data:t,error:n}=await this.getUser();if(n)throw n;return{data:{identities:null!==(e=t.user.identities)&&void 0!==e?e:[]},error:null}}catch(e){if(eW(e))return{data:null,error:e};throw e}}async linkIdentity(e){var t;try{let{data:n,error:r}=await this._useSession(async t=>{var n,r,i,s,o;let{data:a,error:l}=t;if(l)throw l;let c=await this._getUrlForProvider("".concat(this.url,"/user/identities/authorize"),e.provider,{redirectTo:null===(n=e.options)||void 0===n?void 0:n.redirectTo,scopes:null===(r=e.options)||void 0===r?void 0:r.scopes,queryParams:null===(i=e.options)||void 0===i?void 0:i.queryParams,skipBrowserRedirect:!0});return await tt(this.fetch,"GET",c,{headers:this.headers,jwt:null!==(o=null===(s=a.session)||void 0===s?void 0:s.access_token)&&void 0!==o?o:void 0})});if(r)throw r;return!eC()||(null===(t=e.options)||void 0===t?void 0:t.skipBrowserRedirect)||window.location.assign(null==n?void 0:n.url),{data:{provider:e.provider,url:null==n?void 0:n.url},error:null}}catch(t){if(eW(t))return{data:{provider:e.provider,url:null},error:t};throw t}}async unlinkIdentity(e){try{return await this._useSession(async t=>{var n,r;let{data:i,error:s}=t;if(s)throw s;return await tt(this.fetch,"DELETE","".concat(this.url,"/user/identities/").concat(e.identity_id),{headers:this.headers,jwt:null!==(r=null===(n=i.session)||void 0===n?void 0:n.access_token)&&void 0!==r?r:void 0})})}catch(e){if(eW(e))return{data:null,error:e};throw e}}async _refreshAccessToken(e){let t="#_refreshAccessToken(".concat(e.substring(0,5),"...)");this._debug(t,"begin");try{var n,r;let i=Date.now();return await (n=async n=>(await eK(200*n),this._debug(t,"refreshing attempt",n),await tt(this.fetch,"POST","".concat(this.url,"/token?grant_type=refresh_token"),{body:{refresh_token:e},headers:this.headers,xform:tr})),r=(e,t,n)=>n&&n.error&&e3(n.error)&&Date.now()+(e+1)*200-i<3e4,new Promise((e,t)=>{(async()=>{for(let i=0;i<1/0;i++)try{let t=await n(i);if(!r(i,null,t)){e(t);return}}catch(e){if(!r(i,e)){t(e);return}}})()}))}catch(e){if(this._debug(t,"error",e),eW(e))return{data:{session:null,user:null},error:e};throw e}finally{this._debug(t,"end")}}_isValidSession(e){return"object"==typeof e&&null!==e&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){let n=await this._getUrlForProvider("".concat(this.url,"/authorize"),e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",n),eC()&&!t.skipBrowserRedirect&&window.location.assign(n),{data:{provider:e,url:n},error:null}}async _recoverAndRefresh(){var e;let t="#_recoverAndRefresh()";this._debug(t,"begin");try{let n=await eU(this.storage,this.storageKey);if(this._debug(t,"session from storage",n),!this._isValidSession(n)){this._debug(t,"session is not valid"),null!==n&&await this._removeSession();return}let r=Math.round(Date.now()/1e3),i=(null!==(e=n.expires_at)&&void 0!==e?e:1/0)<r+10;if(this._debug(t,"session has".concat(i?"":" not"," expired with margin of ").concat(10,"s")),i){if(this.autoRefreshToken&&n.refresh_token){let{error:e}=await this._callRefreshToken(n.refresh_token);e&&(console.error(e),e3(e)||(this._debug(t,"refresh failed with a non-retryable error, removing the session",e),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",n)}catch(e){this._debug(t,"error",e),console.error(e);return}finally{this._debug(t,"end")}}async _callRefreshToken(e){var t,n;if(!e)throw new e$;if(this.refreshingDeferred)return this.refreshingDeferred.promise;let r="#_callRefreshToken(".concat(e.substring(0,5),"...)");this._debug(r,"begin");try{this.refreshingDeferred=new eF;let{data:t,error:n}=await this._refreshAccessToken(e);if(n)throw n;if(!t.session)throw new e$;await this._saveSession(t.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",t.session);let r={session:t.session,error:null};return this.refreshingDeferred.resolve(r),r}catch(e){if(this._debug(r,"error",e),eW(e)){let n={session:null,error:e};return e3(e)||(await this._removeSession(),await this._notifyAllSubscribers("SIGNED_OUT",null)),null===(t=this.refreshingDeferred)||void 0===t||t.resolve(n),n}throw null===(n=this.refreshingDeferred)||void 0===n||n.reject(e),e}finally{this.refreshingDeferred=null,this._debug(r,"end")}}async _notifyAllSubscribers(e,t){let n=!(arguments.length>2)||void 0===arguments[2]||arguments[2],r="#_notifyAllSubscribers(".concat(e,")");this._debug(r,"begin",t,"broadcast = ".concat(n));try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:e,session:t});let r=[],i=Array.from(this.stateChangeEmitters.values()).map(async n=>{try{await n.callback(e,t)}catch(e){r.push(e)}});if(await Promise.all(i),r.length>0){for(let e=0;e<r.length;e+=1)console.error(r[e]);throw r[0]}}finally{this._debug(r,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),await eZ(this.storage,this.storageKey,e)}async _removeSession(){this._debug("#_removeSession()"),await eM(this.storage,this.storageKey)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");let e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&eC()&&(null==window?void 0:window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(e){console.error("removing visibilitychange callback failed",e)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");let e=setInterval(()=>this._autoRefreshTokenTick(),3e4);this.autoRefreshTicker=e,e&&"object"==typeof e&&"function"==typeof e.unref?e.unref():"undefined"!=typeof Deno&&"function"==typeof Deno.unrefTimer&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");let e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{let e=Date.now();try{return await this._useSession(async t=>{let{data:{session:n}}=t;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}let r=Math.floor((1e3*n.expires_at-e)/3e4);this._debug("#_autoRefreshTokenTick()","access token expires in ".concat(r," ticks, a tick lasts ").concat(3e4,"ms, refresh threshold is ").concat(3," ticks")),r<=3&&await this._callRefreshToken(n.refresh_token)})}catch(e){console.error("Auto refresh tick failed with error. This is likely a transient error.",e)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof tv)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!eC()||!(null==window?void 0:window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),null==window||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){let t="#_onVisibilityChanged(".concat(e,")");this._debug(t,"visibilityState",document.visibilityState),"visible"===document.visibilityState?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if("visible"!==document.visibilityState){this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):"hidden"===document.visibilityState&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t,n){let r=["provider=".concat(encodeURIComponent(t))];if((null==n?void 0:n.redirectTo)&&r.push("redirect_to=".concat(encodeURIComponent(n.redirectTo))),(null==n?void 0:n.scopes)&&r.push("scopes=".concat(encodeURIComponent(n.scopes))),"pkce"===this.flowType){let e=eB();await eZ(this.storage,"".concat(this.storageKey,"-code-verifier"),e);let t=await eJ(e),n=e===t?"plain":"s256";this._debug("PKCE","code verifier","".concat(e.substring(0,5),"..."),"code challenge",t,"method",n);let i=new URLSearchParams({code_challenge:"".concat(encodeURIComponent(t)),code_challenge_method:"".concat(encodeURIComponent(n))});r.push(i.toString())}if(null==n?void 0:n.queryParams){let e=new URLSearchParams(n.queryParams);r.push(e.toString())}return(null==n?void 0:n.skipBrowserRedirect)&&r.push("skip_http_redirect=".concat(n.skipBrowserRedirect)),"".concat(e,"?").concat(r.join("&"))}async _unenroll(e){try{return await this._useSession(async t=>{var n;let{data:r,error:i}=t;return i?{data:null,error:i}:await tt(this.fetch,"DELETE","".concat(this.url,"/factors/").concat(e.factorId),{headers:this.headers,jwt:null===(n=null==r?void 0:r.session)||void 0===n?void 0:n.access_token})})}catch(e){if(eW(e))return{data:null,error:e};throw e}}async _enroll(e){try{return await this._useSession(async t=>{var n,r;let{data:i,error:s}=t;if(s)return{data:null,error:s};let{data:o,error:a}=await tt(this.fetch,"POST","".concat(this.url,"/factors"),{body:{friendly_name:e.friendlyName,factor_type:e.factorType,issuer:e.issuer},headers:this.headers,jwt:null===(n=null==i?void 0:i.session)||void 0===n?void 0:n.access_token});return a?{data:null,error:a}:((null===(r=null==o?void 0:o.totp)||void 0===r?void 0:r.qr_code)&&(o.totp.qr_code="data:image/svg+xml;utf-8,".concat(o.totp.qr_code)),{data:o,error:null})})}catch(e){if(eW(e))return{data:null,error:e};throw e}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var n;let{data:r,error:i}=t;if(i)return{data:null,error:i};let{data:s,error:o}=await tt(this.fetch,"POST","".concat(this.url,"/factors/").concat(e.factorId,"/verify"),{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:null===(n=null==r?void 0:r.session)||void 0===n?void 0:n.access_token});return o?{data:null,error:o}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+s.expires_in},s)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",s),{data:s,error:o})})}catch(e){if(eW(e))return{data:null,error:e};throw e}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var n;let{data:r,error:i}=t;return i?{data:null,error:i}:await tt(this.fetch,"POST","".concat(this.url,"/factors/").concat(e.factorId,"/challenge"),{headers:this.headers,jwt:null===(n=null==r?void 0:r.session)||void 0===n?void 0:n.access_token})})}catch(e){if(eW(e))return{data:null,error:e};throw e}})}async _challengeAndVerify(e){let{data:t,error:n}=await this._challenge({factorId:e.factorId});return n?{data:null,error:n}:await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){let{data:{user:e},error:t}=await this.getUser();if(t)return{data:null,error:t};let n=(null==e?void 0:e.factors)||[],r=n.filter(e=>"totp"===e.factor_type&&"verified"===e.status);return{data:{all:n,totp:r},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var t,n;let{data:{session:r},error:i}=e;if(i)return{data:null,error:i};if(!r)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};let s=this._decodeJWT(r.access_token),o=null;s.aal&&(o=s.aal);let a=o;return(null!==(n=null===(t=r.user.factors)||void 0===t?void 0:t.filter(e=>"verified"===e.status))&&void 0!==n?n:[]).length>0&&(a="aal2"),{data:{currentLevel:o,nextLevel:a,currentAuthenticationMethods:s.amr||[]},error:null}}))}constructor(e){var t,n;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=tw.nextInstanceID,tw.nextInstanceID+=1,this.instanceID>0&&eC()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");let r=Object.assign(Object.assign({},ty),e);if(this.logDebugMessages=!!r.debug,"function"==typeof r.debug&&(this.logger=r.debug),this.persistSession=r.persistSession,this.storageKey=r.storageKey,this.autoRefreshToken=r.autoRefreshToken,this.admin=new tu({url:r.url,headers:r.headers,fetch:r.fetch}),this.url=r.url,this.headers=r.headers,this.fetch=eN(r.fetch),this.lock=r.lock||tb,this.detectSessionInUrl=r.detectSessionInUrl,this.flowType=r.flowType,r.lock?this.lock=r.lock:eC()&&(null===(t=null==globalThis?void 0:globalThis.navigator)||void 0===t?void 0:t.locks)?this.lock=tm:this.lock=tb,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?r.storage?this.storage=r.storage:eI()?this.storage=td:(this.memoryStorage={},this.storage=tf(this.memoryStorage)):(this.memoryStorage={},this.storage=tf(this.memoryStorage)),eC()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(e){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",e)}null===(n=this.broadcastChannel)||void 0===n||n.addEventListener("message",async e=>{this._debug("received broadcast notification from other tab or client",e),await this._notifyAllSubscribers(e.data.event,e.data.session,!1)})}this.initialize()}}tw.nextInstanceID=0;class t_ extends tw{constructor(e){super(e)}}class tk{get functions(){return new l(this.functionsUrl,{headers:this.headers,customFetch:this.fetch})}get storage(){return new ek(this.storageUrl,this.headers,this.fetch)}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.rest.rpc(e,t,n)}channel(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{config:{}};return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,t,n,r,i,s;return n=this,r=void 0,i=void 0,s=function*(){let{data:n}=yield this.auth.getSession();return null!==(t=null===(e=n.session)||void 0===e?void 0:e.access_token)&&void 0!==t?t:null},new(i||(i=Promise))(function(e,t){function o(e){try{l(s.next(e))}catch(e){t(e)}}function a(e){try{l(s.throw(e))}catch(e){t(e)}}function l(t){var n;t.done?e(t.value):((n=t.value)instanceof i?n:new i(function(e){e(n)})).then(o,a)}l((s=s.apply(n,r||[])).next())})}_initSupabaseAuthClient(e,t,n){let{autoRefreshToken:r,persistSession:i,detectSessionInUrl:s,storage:o,storageKey:a,flowType:l,debug:c}=e,u={Authorization:"Bearer ".concat(this.supabaseKey),apikey:"".concat(this.supabaseKey)};return new t_({url:this.authUrl,headers:Object.assign(Object.assign({},u),t),storageKey:a,autoRefreshToken:r,persistSession:i,detectSessionInUrl:s,storage:o,flowType:l,debug:c,fetch:n})}_initRealtimeClient(e){return new Q(this.realtimeUrl,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},null==e?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((e,t)=>{this._handleTokenChanged(e,"CLIENT",null==t?void 0:t.access_token)})}_handleTokenChanged(e,t,n){("TOKEN_REFRESHED"===e||"SIGNED_IN"===e)&&this.changedAccessToken!==n?(this.realtime.setAuth(null!=n?n:null),this.changedAccessToken=n):"SIGNED_OUT"===e&&(this.realtime.setAuth(this.supabaseKey),"STORAGE"==t&&this.auth.signOut(),this.changedAccessToken=void 0)}constructor(e,t,n){var r,i,s,o,a,l,c,u;if(this.supabaseUrl=e,this.supabaseKey=t,!e)throw Error("supabaseUrl is required.");if(!t)throw Error("supabaseKey is required.");let h=e.replace(/\/$/,"");this.realtimeUrl="".concat(h,"/realtime/v1").replace(/^http/i,"ws"),this.authUrl="".concat(h,"/auth/v1"),this.storageUrl="".concat(h,"/storage/v1"),this.functionsUrl="".concat(h,"/functions/v1");let d="sb-".concat(new URL(this.authUrl).hostname.split(".")[0],"-auth-token"),f=function(e,t){let{db:n,auth:r,realtime:i,global:s}=e,{db:o,auth:a,realtime:l,global:c}=t;return{db:Object.assign(Object.assign({},o),n),auth:Object.assign(Object.assign({},a),r),realtime:Object.assign(Object.assign({},l),i),global:Object.assign(Object.assign({},c),s)}}(null!=n?n:{},{db:eT,realtime:eP,auth:Object.assign(Object.assign({},ex),{storageKey:d}),global:eS});this.storageKey=null!==(i=null===(r=f.auth)||void 0===r?void 0:r.storageKey)&&void 0!==i?i:"",this.headers=null!==(o=null===(s=f.global)||void 0===s?void 0:s.headers)&&void 0!==o?o:{},this.auth=this._initSupabaseAuthClient(null!==(a=f.auth)&&void 0!==a?a:{},this.headers,null===(l=f.global)||void 0===l?void 0:l.fetch),this.fetch=eR(t,this._getAccessToken.bind(this),null===(c=f.global)||void 0===c?void 0:c.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers},f.realtime)),this.rest=new N("".concat(h,"/rest/v1"),{headers:this.headers,schema:null===(u=f.db)||void 0===u?void 0:u.schema,fetch:this.fetch}),this._listenForAuthEvents()}}let tE=(e,t,n)=>new tk(e,t,n)},8717:function(e,t){Symbol.for("react.element"),Symbol.for("react.portal"),Symbol.for("react.fragment"),Symbol.for("react.strict_mode"),Symbol.for("react.profiler"),Symbol.for("react.provider"),Symbol.for("react.context"),Symbol.for("react.server_context"),Symbol.for("react.forward_ref"),Symbol.for("react.suspense"),Symbol.for("react.suspense_list"),Symbol.for("react.memo"),Symbol.for("react.lazy"),Symbol.for("react.offscreen"),Symbol.for("react.module.reference")},8031:function(e,t,n){n(8717)},1433:function(e,t,n){n.d(t,{E:function(){return r}});function r(e,t){if(t.has(e))throw TypeError("Cannot initialize the same private elements twice on an object")}},1120:function(e,t,n){n.d(t,{J:function(){return r}});function r(e,t,n){if(!t.has(e))throw TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}},6134:function(e,t,n){n.d(t,{_:function(){return i}});var r=n(1120);function i(e,t){var n=(0,r.J)(e,t,"get");return n.get?n.get.call(e):n.value}},5252:function(e,t,n){n.d(t,{_:function(){return i}});var r=n(1433);function i(e,t,n){(0,r.E)(e,t),t.set(e,n)}},796:function(e,t,n){n.d(t,{_:function(){return i}});var r=n(1120);function i(e,t,n){var i=(0,r.J)(e,t,"set");return!function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw TypeError("attempted to set read only private field");t.value=n}}(e,i,n),n}},6132:function(e,t,n){n.d(t,{_:function(){return r}});function r(e,t,n){if(!t.has(e))throw TypeError("attempted to get private field on non-instance");return n}},6907:function(e,t,n){n.d(t,{_:function(){return i}});var r=n(1433);function i(e,t){(0,r.E)(e,t),t.add(e)}},7239:function(e,t,n){n.d(t,{j:function(){return h}});var r,i,s,o=n(6134),a=n(5252),l=n(796),c=n(8407),u=n(9675),h=new(r=new WeakMap,i=new WeakMap,s=new WeakMap,class extends c.l{onSubscribe(){(0,o._)(this,i)||this.setEventListener((0,o._)(this,s))}onUnsubscribe(){var e;this.hasListeners()||(null===(e=(0,o._)(this,i))||void 0===e||e.call(this),(0,l._)(this,i,void 0))}setEventListener(e){var t;(0,l._)(this,s,e),null===(t=(0,o._)(this,i))||void 0===t||t.call(this),(0,l._)(this,i,e(e=>{"boolean"==typeof e?this.setFocused(e):this.onFocus()}))}setFocused(e){(0,o._)(this,r)!==e&&((0,l._)(this,r,e),this.onFocus())}onFocus(){this.listeners.forEach(e=>{e()})}isFocused(){var e;return"boolean"==typeof(0,o._)(this,r)?(0,o._)(this,r):(null===(e=globalThis.document)||void 0===e?void 0:e.visibilityState)!=="hidden"}constructor(){super(),(0,a._)(this,r,{writable:!0,value:void 0}),(0,a._)(this,i,{writable:!0,value:void 0}),(0,a._)(this,s,{writable:!0,value:void 0}),(0,l._)(this,s,e=>{if(!u.sk&&window.addEventListener){let t=()=>e();return window.addEventListener("visibilitychange",t,!1),()=>{window.removeEventListener("visibilitychange",t)}}})}})},3572:function(e,t,n){n.d(t,{R:function(){return m},m:function(){return g}});var r,i,s,o,a,l=n(6134),c=n(5252),u=n(796),h=n(6132),d=n(6907),f=n(1037),p=n(1600),v=n(4233),g=(r=new WeakMap,i=new WeakMap,s=new WeakMap,o=new WeakMap,a=new WeakSet,class extends p.F{setOptions(e){this.options={...(0,l._)(this,i),...e},this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){(0,l._)(this,r).includes(e)||((0,l._)(this,r).push(e),this.clearGcTimeout(),(0,l._)(this,s).notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){(0,u._)(this,r,(0,l._)(this,r).filter(t=>t!==e)),this.scheduleGc(),(0,l._)(this,s).notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){(0,l._)(this,r).length||("pending"===this.state.status?this.scheduleGc():(0,l._)(this,s).remove(this))}continue(){var e,t;return null!==(t=null===(e=(0,l._)(this,o))||void 0===e?void 0:e.continue())&&void 0!==t?t:this.execute(this.state.variables)}async execute(e){var t,n,r,i,c,d,f,p,g,m,b,w,_,k,E,S,T,x,P,O;let j="pending"===this.state.status;try{if(!j){(0,h._)(this,a,y).call(this,{type:"pending",variables:e}),await (null===(g=(m=(0,l._)(this,s).config).onMutate)||void 0===g?void 0:g.call(m,e,this));let t=await (null===(b=(w=this.options).onMutate)||void 0===b?void 0:b.call(w,e));t!==this.state.context&&(0,h._)(this,a,y).call(this,{type:"pending",context:t,variables:e})}let _=await (()=>{var t;return(0,u._)(this,o,(0,v.Mz)({fn:()=>this.options.mutationFn?this.options.mutationFn(e):Promise.reject(Error("No mutationFn found")),onFail:(e,t)=>{(0,h._)(this,a,y).call(this,{type:"failed",failureCount:e,error:t})},onPause:()=>{(0,h._)(this,a,y).call(this,{type:"pause"})},onContinue:()=>{(0,h._)(this,a,y).call(this,{type:"continue"})},retry:null!==(t=this.options.retry)&&void 0!==t?t:0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode})),(0,l._)(this,o).promise})();return await (null===(t=(n=(0,l._)(this,s).config).onSuccess)||void 0===t?void 0:t.call(n,_,e,this.state.context,this)),await (null===(r=(i=this.options).onSuccess)||void 0===r?void 0:r.call(i,_,e,this.state.context)),await (null===(c=(d=(0,l._)(this,s).config).onSettled)||void 0===c?void 0:c.call(d,_,null,this.state.variables,this.state.context,this)),await (null===(f=(p=this.options).onSettled)||void 0===f?void 0:f.call(p,_,null,e,this.state.context)),(0,h._)(this,a,y).call(this,{type:"success",data:_}),_}catch(t){try{throw await (null===(_=(k=(0,l._)(this,s).config).onError)||void 0===_?void 0:_.call(k,t,e,this.state.context,this)),await (null===(E=(S=this.options).onError)||void 0===E?void 0:E.call(S,t,e,this.state.context)),await (null===(T=(x=(0,l._)(this,s).config).onSettled)||void 0===T?void 0:T.call(x,void 0,t,this.state.variables,this.state.context,this)),await (null===(P=(O=this.options).onSettled)||void 0===P?void 0:P.call(O,void 0,t,e,this.state.context)),t}finally{(0,h._)(this,a,y).call(this,{type:"error",error:t})}}}constructor(e){super(),(0,d._)(this,a),(0,c._)(this,r,{writable:!0,value:void 0}),(0,c._)(this,i,{writable:!0,value:void 0}),(0,c._)(this,s,{writable:!0,value:void 0}),(0,c._)(this,o,{writable:!0,value:void 0}),this.mutationId=e.mutationId,(0,u._)(this,i,e.defaultOptions),(0,u._)(this,s,e.mutationCache),(0,u._)(this,r,[]),this.state=e.state||m(),this.setOptions(e.options),this.scheduleGc()}});function m(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}function y(e){this.state=(t=>{switch(e.type){case"failed":return{...t,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...t,isPaused:!0};case"continue":return{...t,isPaused:!1};case"pending":return{...t,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:!(0,v.Kw)(this.options.networkMode),status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...t,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...t,data:void 0,error:e.error,failureCount:t.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}})(this.state),f.V.batch(()=>{(0,l._)(this,r).forEach(t=>{t.onMutationUpdate(e)}),(0,l._)(this,s).notify({mutation:this,type:"updated",action:e})})}},1037:function(e,t,n){n.d(t,{V:function(){return r}});var r=function(){let e=[],t=0,n=e=>{e()},r=e=>{e()},i=e=>setTimeout(e,0),s=r=>{t?e.push(r):i(()=>{n(r)})},o=()=>{let t=e;e=[],t.length&&i(()=>{r(()=>{t.forEach(e=>{n(e)})})})};return{batch:e=>{let n;t++;try{n=e()}finally{--t||o()}return n},batchCalls:e=>function(){for(var t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];s(()=>{e(...n)})},schedule:s,setNotifyFunction:e=>{n=e},setBatchNotifyFunction:e=>{r=e},setScheduler:e=>{i=e}}}()},7184:function(e,t,n){n.d(t,{N:function(){return h}});var r,i,s,o=n(6134),a=n(5252),l=n(796),c=n(8407),u=n(9675),h=new(r=new WeakMap,i=new WeakMap,s=new WeakMap,class extends c.l{onSubscribe(){(0,o._)(this,i)||this.setEventListener((0,o._)(this,s))}onUnsubscribe(){var e;this.hasListeners()||(null===(e=(0,o._)(this,i))||void 0===e||e.call(this),(0,l._)(this,i,void 0))}setEventListener(e){var t;(0,l._)(this,s,e),null===(t=(0,o._)(this,i))||void 0===t||t.call(this),(0,l._)(this,i,e(this.setOnline.bind(this)))}setOnline(e){(0,o._)(this,r)!==e&&((0,l._)(this,r,e),this.listeners.forEach(t=>{t(e)}))}isOnline(){return(0,o._)(this,r)}constructor(){super(),(0,a._)(this,r,{writable:!0,value:void 0}),(0,a._)(this,i,{writable:!0,value:void 0}),(0,a._)(this,s,{writable:!0,value:void 0}),(0,l._)(this,r,!0),(0,l._)(this,s,e=>{if(!u.sk&&window.addEventListener){let t=()=>e(!0),n=()=>e(!1);return window.addEventListener("online",t,!1),window.addEventListener("offline",n,!1),()=>{window.removeEventListener("online",t),window.removeEventListener("offline",n)}}})}})},1600:function(e,t,n){n.d(t,{F:function(){return l}});var r,i=n(6134),s=n(5252),o=n(796),a=n(9675),l=(r=new WeakMap,class{destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),(0,a.PN)(this.gcTime)&&(0,o._)(this,r,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,null!=e?e:a.sk?1/0:3e5)}clearGcTimeout(){(0,i._)(this,r)&&(clearTimeout((0,i._)(this,r)),(0,o._)(this,r,void 0))}constructor(){(0,s._)(this,r,{writable:!0,value:void 0})}})},4233:function(e,t,n){n.d(t,{DV:function(){return c},Kw:function(){return a},Mz:function(){return u}});var r=n(7239),i=n(7184),s=n(9675);function o(e){return Math.min(1e3*2**e,3e4)}function a(e){return(null!=e?e:"online")!=="online"||i.N.isOnline()}var l=class{constructor(e){this.revert=null==e?void 0:e.revert,this.silent=null==e?void 0:e.silent}};function c(e){return e instanceof l}function u(e){let t,n,c,u=!1,h=0,d=!1,f=new Promise((e,t)=>{n=e,c=t}),p=()=>!r.j.isFocused()||"always"!==e.networkMode&&!i.N.isOnline(),v=r=>{if(!d){var i;d=!0,null===(i=e.onSuccess)||void 0===i||i.call(e,r),null==t||t(),n(r)}},g=n=>{if(!d){var r;d=!0,null===(r=e.onError)||void 0===r||r.call(e,n),null==t||t(),c(n)}},m=()=>new Promise(n=>{var r;t=e=>{let t=d||!p();return t&&n(e),t},null===(r=e.onPause)||void 0===r||r.call(e)}).then(()=>{if(t=void 0,!d){var n;null===(n=e.onContinue)||void 0===n||n.call(e)}}),y=()=>{let t;if(!d){try{t=e.fn()}catch(e){t=Promise.reject(e)}Promise.resolve(t).then(v).catch(t=>{var n,r,i;if(d)return;let a=null!==(r=e.retry)&&void 0!==r?r:s.sk?0:3,l=null!==(i=e.retryDelay)&&void 0!==i?i:o,c="function"==typeof l?l(h,t):l,f=!0===a||"number"==typeof a&&h<a||"function"==typeof a&&a(h,t);if(u||!f){g(t);return}h++,null===(n=e.onFail)||void 0===n||n.call(e,h,t),(0,s._v)(c).then(()=>{if(p())return m()}).then(()=>{u?g(t):y()})})}};return a(e.networkMode)?y():m().then(y),{promise:f,cancel:t=>{if(!d){var n;g(new l(t)),null===(n=e.abort)||void 0===n||n.call(e)}},continue:()=>(null==t?void 0:t())?f:Promise.resolve(),cancelRetry:()=>{u=!0},continueRetry:()=>{u=!1}}}},8407:function(e,t,n){n.d(t,{l:function(){return r}});var r=class{subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}}},9675:function(e,t,n){n.d(t,{Ht:function(){return w},Kp:function(){return a},PN:function(){return o},Rm:function(){return u},SE:function(){return s},VS:function(){return f},VX:function(){return b},X7:function(){return c},Ym:function(){return h},ZT:function(){return i},_v:function(){return m},_x:function(){return l},oE:function(){return y},sk:function(){return r},to:function(){return d}});var r="Deno"in window;function i(){}function s(e,t){return"function"==typeof e?e(t):e}function o(e){return"number"==typeof e&&e>=0&&e!==1/0}function a(e,t){return Math.max(e+(t||0)-Date.now(),0)}function l(e,t){let{type:n="all",exact:r,fetchStatus:i,predicate:s,queryKey:o,stale:a}=e;if(o){if(r){if(t.queryHash!==u(o,t.options))return!1}else if(!d(t.queryKey,o))return!1}if("all"!==n){let e=t.isActive();if("active"===n&&!e||"inactive"===n&&e)return!1}return("boolean"!=typeof a||t.isStale()===a)&&(void 0===i||i===t.state.fetchStatus)&&(!s||!!s(t))}function c(e,t){let{exact:n,status:r,predicate:i,mutationKey:s}=e;if(s){if(!t.options.mutationKey)return!1;if(n){if(h(t.options.mutationKey)!==h(s))return!1}else if(!d(t.options.mutationKey,s))return!1}return(!r||t.state.status===r)&&(!i||!!i(t))}function u(e,t){return((null==t?void 0:t.queryKeyHashFn)||h)(e)}function h(e){return JSON.stringify(e,(e,t)=>v(t)?Object.keys(t).sort().reduce((e,n)=>(e[n]=t[n],e),{}):t)}function d(e,t){return e===t||typeof e==typeof t&&!!e&&!!t&&"object"==typeof e&&"object"==typeof t&&!Object.keys(t).some(n=>!d(e[n],t[n]))}function f(e,t){if(!t||Object.keys(e).length!==Object.keys(t).length)return!1;for(let n in e)if(e[n]!==t[n])return!1;return!0}function p(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function v(e){if(!g(e))return!1;let t=e.constructor;if(void 0===t)return!0;let n=t.prototype;return!!(g(n)&&n.hasOwnProperty("isPrototypeOf"))}function g(e){return"[object Object]"===Object.prototype.toString.call(e)}function m(e){return new Promise(t=>{setTimeout(t,e)})}function y(e,t,n){return"function"==typeof n.structuralSharing?n.structuralSharing(e,t):!1!==n.structuralSharing?function e(t,n){if(t===n)return t;let r=p(t)&&p(n);if(r||v(t)&&v(n)){let i=r?t:Object.keys(t),s=i.length,o=r?n:Object.keys(n),a=o.length,l=r?[]:{},c=0;for(let s=0;s<a;s++){let a=r?s:o[s];!r&&void 0===t[a]&&void 0===n[a]&&i.includes(a)?(l[a]=void 0,c++):(l[a]=e(t[a],n[a]),l[a]===t[a]&&void 0!==t[a]&&c++)}return s===a&&c===s?t:l}return n}(e,t):t}function b(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=[...e,t];return n&&r.length>n?r.slice(1):r}function w(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=[t,...e];return n&&r.length>n?r.slice(0,-1):r}},8706:function(e,t,n){n.d(t,{NL:function(){return o},aH:function(){return a}});var r=n(4209),i=n(2872),s=r.createContext(void 0),o=e=>{let t=r.useContext(s);if(e)return e;if(!t)throw Error("No QueryClient set, use QueryClientProvider to set one");return t},a=e=>{let{client:t,children:n}=e;return r.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),(0,i.jsx)(s.Provider,{value:t,children:n})}}}]);